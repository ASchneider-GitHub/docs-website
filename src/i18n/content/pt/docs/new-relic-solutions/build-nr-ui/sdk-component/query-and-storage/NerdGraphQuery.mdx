---
title: NerdGraphQuery
metaDescription: Learn how to work the NerdGraphQuery component
freshnessValidatedDate: '2024-06-03T00:00:00.000Z'
translationType: machine
---

O SDK do New Relic One fornece componentes de consulta baseados nos componentes de consulta do ApolloClient. Esses componentes são uma camada de abstração que facilita a consulta do NerdGraph sem a preocupação de configurar o Apollo Client e, para os casos de uso mais comuns, sem a necessidade de escrever consultas do GraphQL.

Um componente genérico de consulta do NerdGraph que permite consultar qualquer coisa do NerdGraph.

### Uso

```js
import { NerdGraphQuery } from 'nr1'
```

### Exemplos

#### Exemplo 1

```js
function render() {
  const query = `
        query($id: Int!) {
            actor {
                account(id: $id) {
                    name
                }
            }
        }
    `;


  const variables = {
    id: 1,
  };


  return (
    <NerdGraphQuery query={query} variables={variables}>
      {({ loading, error, data }) => {
        if (loading) {
          return <Spinner />;
        }


        if (error) {
          return 'Error!';
        }


        return <BlockText>{data.actor.account.name}</BlockText>;
      }}
    </NerdGraphQuery>
  );
}
```

### Props

<table>
  <tbody>
    <tr>
      <td>
        `children` <h5>função</h5>
      </td>

      <td>
        Renderize a função prop como uma criança.

        <FunctionDefinition
          returnValue={[{"type":"React.ReactNode","description":""}]}
          arguments={[{"name":"queryResult","type":"QueryResult","description":"Results of the query."}]}
        />
      </td>
    </tr>

    <tr>
      <td>
        `fetchPolicyType` <h5>enumeração</h5>
      </td>

      <td>
        Permite especificar como deseja que sua consulta interaja com os dados armazenados em cache.

        * `CACHE_AND_NETWORK`: a consulta retorna seus dados iniciais do cache, se disponíveis. Porém, independentemente de os dados completos estarem ou não em seu cache, a consulta sempre faz uma solicitação usando sua interface de rede e retorna os dados atualizados. Esta opção não está disponível ao usar o método estático `query()` do componente.

        * `CACHE_FIRST`: a consulta faz uma solicitação usando sua interface de rede **somente** se os dados da sua consulta ainda não estiverem no cache.

        * `CACHE_ONLY`: a consulta **nunca** faz uma solicitação usando sua interface de rede. Em vez disso, retorna os dados disponíveis no cache. Se os dados da sua consulta não existirem no cache, será gerado um erro.

        * `NETWORK_ONLY`: a consulta **nunca** retorna os dados iniciais do cache. Em vez disso, ele **sempre** faz uma solicitação usando sua interface de rede.

        * `NO_CACHE`: a consulta **nunca** retorna os dados iniciais do cache. Em vez disso, ele **sempre** faz uma solicitação usando sua interface de rede. Diferentemente da política `NETWORK_ONLY` , ela não grava nenhum dado no cache após a conclusão da consulta.

          <OptionReference>
            NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_AND_NETWORK, NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_FIRST, NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_ONLY, NerdGraphQuery.FETCH_POLICY_TYPE.NETWORK_ONLY, NerdGraphQuery.FETCH_POLICY_TYPE.NO_CACHE,
          </OptionReference>
      </td>
    </tr>

    <tr>
      <td>
        `pollInterval` <h5>número</h5>
      </td>

      <td>
        Intervalo em milissegundos para pesquisar novos dados. Defina como zero para evitar qualquer tipo de pesquisa regular.
      </td>
    </tr>

    <tr>
      <td>
        `query` <h5>String</h5><h5>OBRIGATÓRIA</h5>|objeto
      </td>

      <td>
        Consulta GraphQL, seja como uma string ou um documento GraphQL analisado em um AST pelo método `gql` de `nr1`.

        ```js
        import { ngql } from 'nr1';

        const query = ngql`
          {
            actor {
              user {
                id
                email
                name
              }
            }
          }
        `;
        ```
      </td>
    </tr>

    <tr>
      <td>
        `skip` <h5>boleano</h5>
      </td>

      <td>
        Quando definido como `true`, a consulta será totalmente ignorada da renderização.
      </td>
    </tr>

    <tr>
      <td>
        `unsafeExperimentalNamespaces` <h5>string\[]</h5>
      </td>

      <td>
        Lista contendo [namespaces experimentais](https://pages.datanerd.us/unified-api/nerd-graph-docs/graphql/schema_visibility.html#experimental-api-support) inseguros que sua consulta optou por usar.
      </td>
    </tr>

    <tr>
      <td>
        `variables` <h5>objeto</h5>
      </td>

      <td>
        Objeto que contém todas as variáveis que sua consulta precisa executar.
      </td>
    </tr>
  </tbody>
</table>

### Métodos

### `NerdGraphQuery.query`

<FunctionDefinition
  arguments={[{"description":"Object containing the query options. Any `NerdGraphQuery` prop is a valid option except `children` and `pollInterval`.","name":"props","type":"Object"}]}
  returnValue={{"description":"","type":"PromiseQueryResult"}}
/>

### Definições de tipo

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":[{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/><TypeDefReference typeDef={{"name":"QueryResult","properties":[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>