---
title: NrqlQuery
metaDescription: Learn how to work the NrqlQuery component
freshnessValidatedDate: '2024-06-03T00:00:00.000Z'
translationType: machine
---

Busque dados para CDS por meio de uma consulta NRQL.

O componente pode retornar dados em um formato compatível com o componente Chart.

### Uso

```js
import { NrqlQuery } from 'nr1'
```

### Exemplos

#### Transformar dados

```js
<NrqlQuery
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    if (data) {
      // change colors to a nice pink.
      data.forEach(({ metadata }) => (metadata.color = '#F00BA5'));
    }


    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

#### Dados de votação

```js
<NrqlQuery
  pollInterval={2000}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

#### Pesquisa automática

```js
<NrqlQuery
  pollInterval={NrqlQuery.AUTO_POLL_INTERVAL}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

### Props

<table>
  <tbody>
    <tr>
      <td>
        `accountId` <h5>Número</h5> <h5>obsoleto</h5>
      </td>

      <td>
        <Callout
          variant="caution"
          title="Vencimento em 1º de novembro de 2022"
        >
          A propriedade "accountId" está obsoleta, use a propriedade "accountIds".
        </Callout>

        identificador da conta para executar a consulta NRQL .
      </td>
    </tr>

    <tr>
      <td>
        `accountIds` Número <h5>OBRIGATÓRIO</h5> <h5>\[]</h5>
      </td>

      <td>
        identificador de contas para executar a consulta NRQL .
      </td>
    </tr>

    <tr>
      <td>
        `children` <h5>função</h5>
      </td>

      <td>
        Renderize a função prop como uma criança.

        <FunctionDefinition
          returnValue={[{"type":"React.ReactNode","description":""}]}
          arguments={[{"name":"queryResult","type":"QueryResult","description":"Results of the query."}]}
        />
      </td>
    </tr>

    <tr>
      <td>
        `formatType` <h5>enumeração</h5>
      </td>

      <td>
        Formato da resposta.

        <OptionReference>
          NrqlQuery.FORMAT_TYPE.CHART, NrqlQuery.FORMAT_TYPE.RAW,
        </OptionReference>
      </td>
    </tr>

    <tr>
      <td>
        `offset` <h5>número</h5>
      </td>

      <td>
        Deslocamento a ser aplicado ao cálculo start_time e end_time, em milissegundos de época. Este deslocamento só é aplicado quando a consulta é aberta, ou seja:1. end_time não é especificado e 2. duração é especificada. Se essas condições forem atendidas e um valor de deslocamento estiver presente, o end_time efetivo será definido para compensar milissegundos que terminam agora, enquanto o start_time efetivo será definido para (deslocamento + duração) milissegundos antes desse end_time.
      </td>
    </tr>

    <tr>
      <td>
        `pollInterval` <h5>number|enum</h5>
      </td>

      <td>
        Intervalo em milissegundos para pesquisar novos dados ou definir automaticamente com base nos metadados dos dados de resposta.
      </td>
    </tr>

    <tr>
      <td>
        `query` <h5>Sequência</h5><h5>OBRIGATÓRIA</h5>
      </td>

      <td>
        Consulta NRQL . [Consulte a documentaçãoNRQL para referência](https://docs.newrelic.com/docs/insights/nrql-new-relic-query-language/nrql-reference).
      </td>
    </tr>

    <tr>
      <td>
        `skip` <h5>boleano</h5>
      </td>

      <td>
        Quando definido como `true`, a consulta será totalmente ignorada da renderização.
      </td>
    </tr>

    <tr>
      <td>
        `timeRange` <h5>forma</h5>
      </td>

      <td>
        Intervalo de tempo para escopo do intervalo de tempo de consulta NRQL. Quando apenas a duração é fornecida, ele usa a duração para consultar de AGORA até DURAÇÃO (também conhecida como consulta aberta). Quando o horário de início e o horário de término são fornecidos, ele os utiliza para consultar DESDE o horário de início ATÉ o horário de término (também conhecido como consulta fechada).

        <h3>forma</h3>

        `begin_time` <h5>número</h5>

        `duration` <h5>número</h5>

        `end_time` <h5>número</h5>
      </td>
    </tr>
  </tbody>
</table>

### Métodos

### `NrqlQuery.query`

<FunctionDefinition
  arguments={[{"description":"Object containing the query options. Any `NrqlQuery` prop is a valid option except `children` and `pollInterval`.","name":"props","type":"Object"}]}
  returnValue={{"description":"","type":"PromiseQueryResult"}}
/>

### Definições de tipo

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":[{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>

<TypeDefReference typeDef={{"name":"QueryResult","properties":[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>