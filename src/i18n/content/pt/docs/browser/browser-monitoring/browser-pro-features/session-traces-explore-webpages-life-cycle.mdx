---
title: 'Trace da sessão: Explore o ciclo de vida de uma página web'
metaDescription: 'For New Relic browser monitoring, the session traces feature lets you see a timeline of the technical and user-triggered events for a webpage''s full life cycle.'
freshnessValidatedDate: '2024-05-06T00:00:00.000Z'
translationType: machine
---

import browserSessionTraces from 'images/browser_screenshot-full_session-traces.webp'

import browserSessionTraceDetails from 'images/browser_screenshot-full_session-trace-details.webp'

import browserSessionTraceIndex from 'images/browser_screenshot-full_session-traces-index.webp'

import browserConfigureSessionTraceSamplingRate from 'images/browser_screenshot-full_configure-session-trace-sampling-rate.webp'

import browserMonthlySessionTraceConsumptionQuery from 'images/browser_screenshot-full_monthly-session-trace-consumption-query.webp'

import browserDailySessionTraceConsumptionQuery from 'images/browser_screenshot-full_daily-session-trace-consumption-query.webp'

<Callout variant="important">
  Session trace data will be billable starting June 10, 2024. See [Data consumption](#plan-for-paid-consumption) for details.
</Callout>

<DoNotTranslate>**Session traces**</DoNotTranslate> provides a detailed timeline of the load and interaction events during a webpage's full life cycle up to ten minutes. Select the session URL or session trace ID, you can use the detailed waterfall visualization and heat map overview to examine metrics and identify problems related to:

* Tempo de carregamento da página
* Cargas de ativos individuais
* Interação do usuário
* Solicitações AJAX
* Retorno de chamada
* Erros e outros eventos durante a sessão

<img
  title="Session trace error details"
  alt="A screenshot of error details in a browser session trace"
  src={browserSessionTraces}
/>

<figcaption>
  Vá para <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com) > Browser > (select an app) > Session traces**</DoNotTranslate>: Aqui está um exemplo de algumas das riquezas de informações que você pode explorar em uma sessão de rastreamento.
</figcaption>

## Casos de uso [#benefits]

Session traces help you solve the following problems:

<table>
  <thead>
    <tr>
      <th style={{ width: "250px" }}>
        Problema
      </th>

      <th>
        Use session traces to...
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        Problemas backend
      </td>

      <td>
        Veja quanto tempo leva desde o início da solicitação até o término da atividade backend e o início do processo de carregamento do DOM.
      </td>
    </tr>

    <tr>
      <td>
        Problemas de tempo de carregamento da página
      </td>

      <td>
        Explore dados que ajudam você a responder perguntas como:

        * Qual é a experiência [de carregamento de página](/docs/browser/new-relic-browser/page-load-timing-resources/page-load-timing-process) do seu usuário?
        * Quanto tempo leva para o processamento DOM ou solicitações AJAX serem concluídos?
        * Por que uma página carrega mais lentamente do que outras?
        * Qual é o contexto de um evento individual durante uma sessão?
      </td>
    </tr>

    <tr>
      <td>
        Poor core web vitals
      </td>

      <td>
        Observe os segmentos de tempo de interação para a próxima pintura e a pintura de maior conteúdo para identificar problemas de desempenho que afetam seus [core web vitals](/docs/tutorial-improve-site-performance/guide-to-monitoring-core-web-vitals).
      </td>
    </tr>

    <tr>
      <td>
        Evento JavaScript
      </td>

      <td>
        Examine a sequência de [JavaScript](#slow-javascript-execution) e eventos do browser para entender:

        * Quais demoram mais que outros?
        * Quando cada evento ocorre?
      </td>
    </tr>

    <tr>
      <td>
        Erros
      </td>

      <td>
        Classifique ou filtre os erros para ver quais padrões surgem. Por exemplo, você pode verificar se os erros aumentam com base em:

        * Tipo de browser (Google Chrome, Mozilla Firefox, etc.)
        * Um tipo de dispositivo específico (desktop, tablet, mobile)
      </td>
    </tr>
  </tbody>
</table>

Ao conectar o desempenho à experiência do usuário e a interação ao desempenho, a capacidade de ver todos os eventos na sessão do usuário pode ajudá-lo a identificar áreas problemáticas e identificar soluções. Você também pode criar um link permanente para compartilhar essas informações com outras pessoas.

## Iniciar [#requirements]

<Steps>
  <Step>
    ### Pré-requisitos [#prerequisites]

    1. Vá para <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com/all-capabilities) > All Capabilities > Browser**</DoNotTranslate>.

    2. Selecione seu aplicativo de browser.

    3. No menu à esquerda, clique em <DoNotTranslate>**Application settings**</DoNotTranslate>.

    4. Na página Configurações do aplicativo, certifique-se de <DoNotTranslate>**Pro**</DoNotTranslate> ou <DoNotTranslate>**Pro + SPA**</DoNotTranslate> agente browser esteja selecionado. Session Replay não está disponível para o agente browser Lite.

    5. Verify <DoNotTranslate>**Session traces**</DoNotTranslate> are toggled ON. They are enabled by default.

       Traces will only be captured from browsers that support the [Resource Timing API](https://www.w3.org/TR/resource-timing/).

       If you're using [multiple names for an app](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app), session traces will only report to the [most specific application](/docs/agents/manage-apm-agents/app-naming/use-multiple-names-app#most-least-specific).
  </Step>

  <Step>
    ### Configurar taxas de amostragem [#configure-sampling-rates]

    <img
      title="Configure sampling rates in the pplication settings page"
      alt="Screenshot of the application settings page"
      src={browserConfigureSessionTraceSamplingRate}
    />

    Choose your sampling mode:

    * <DoNotTranslate>**Default**</DoNotTranslate> collects 90 traces per hour regardless of your application's traffic. Choose this mode if you only need a small sample of session traces. Note that there may not always be traces available on sessions you're troubleshooting.
    * <DoNotTranslate>**Custom**</DoNotTranslate> allows you to collect traces for 0.000001-100% of all sessions and 0.000001-100% of errored sessions. Choose this mode if you want more session traces available to troubleshoot page load timings or JavaScript errors.

    Por exemplo, se você definir a taxa de amostragem da sessão como 50% e a taxa de amostragem de erro como 100%, isso significa que:

    * Half of all user sessions will collect a trace.

    * All errored sessions will collect a trace, even if they're not part of the 50% sample. The agent buffers a sliding window of data for up to 30 seconds on the client side, and if errors occur, the buffered data will be harvested and the remainder of the session will be traced. If an error does not occur, the trace is never harvested.

      <Callout variant="important">
        When your session trace and [session replay sampling rules](/docs/browser/browser-monitoring/browser-pro-features/session-replay/#configure-sampling-rates) have different values, we'll use the higher value to collect traces.

        For example, if your session replay sampling rate is 20% and your trace sampling rate is 10%, we’ll collect traces for 20% of your sessions. If your trace sampling rate is 30%, we'll collect traces for 30% of your sessions.
      </Callout>
  </Step>

  <Step>
    ### Selecione um trace da sessão [#index]

    <img
      title="Session trace index"
      alt="Screenshot of the session trace index"
      src={browserSessionTraceIndex}
    />

    <figcaption>
      <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Browser > (select an app) > Session traces**</DoNotTranslate>: pesquise por URL ou ID de rastreamento da sessão ou classifique qualquer coluna e clique no link para usar os detalhes interativos do rastreamento da sessão.
    </figcaption>

    Para selecionar um trace específico da sessão:

    1. Vá para <DoNotTranslate>**[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Browser > (select a browser app) > Session traces**</DoNotTranslate>.

    2. Para limitar o índice a uma URL específica ou ID de rastreamento da sessão, use a janela de pesquisa.

    3. Para procurar outros padrões, altere a ordem de classificação em qualquer coluna.

    4. Clique no link trace da sessão e use a página de detalhes para obter informações detalhadas.

       Para uma análise mais profunda, você também pode consultar atributos como [`session`](/attribute-dictionary/?event=BrowserInteraction&attribute=session), [`sessionTraceId`](/attribute-dictionary/?event=AjaxRequest&attribute=sessionTraceId), [`largestContentfulPaint`](/attribute-dictionary/?event=PageViewTiming&attribute=largestContentfulPaint), etc. Para mais informações, consulte nossa documentação sobre [monitoramento de dados de eventos do Browser](/docs/data-apis/understand-data/event-data/events-reported-browser-monitoring/) bem como nosso [dicionário de dados](/attribute-dictionary/?dataSource=Browser+agent).
  </Step>
</Steps>

## Definições de segmento de sessão [#segment-defs]

Para aplicativos que foram [implantados usando o método copiar/colar](/docs/browser/new-relic-browser/installation-configuration/adding-apps-new-relic-browser) no New Relic, o monitoramento do browser inclui aplicativo da web e tempo de fila em `Network` tempo como parte do [processo de tempo de carregamento da página](/docs/browser/new-relic-browser/page-load-timing-resources/page-load-timing-process). Isso ocorre porque o monitoramento do browser depende do agente do lado do servidor para passar os valores da aplicação para o agente browser por meio de injeção automática.

Você pode visualizar informações detalhadas sobre como esse tempo backend é dividido do ponto de vista do browser. O trace da sessão reporta todos os eventos relacionados à rede disponíveis, para que você possa ver caso a caso como o browser gasta tempo em pesquisas de DNS e outros eventos de rede.

As medições de cada segmento indicam quanto tempo de sessão o segmento terminou. Por exemplo, se `Page load` for `6.9s`, isso significa que o evento de carregamento da página foi concluído 6,9 segundos após o início da solicitação.

A tabela a seguir descreve cada segmento do trace da sessão, com link para o dicionário de dados para mais detalhes sobre esses atributos.

<table>
  <thead>
    <tr>
      <th style={{ width: "150px" }}>
        Segmento de sessão
      </th>

      <th>
        Descrição
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [Backend](/attribute-dictionary/?event=PageView&attribute=backendDuration)
      </td>

      <td>
        O momento desde o início da solicitação até o término da atividade backend e o início do carregamento do DOM.
      </td>
    </tr>

    <tr>
      <td>
        [Processamento DOM](/attribute-dictionary/?event=PageView&attribute=domProcessingDuration)
      </td>

      <td>
        O horário desde o início da solicitação até o término do processamento do DOM.
      </td>
    </tr>

    <tr>
      <td>
        [Carregamento de página](/attribute-dictionary/?event=BrowserInteraction)
      </td>

      <td>
        O horário desde o início da solicitação até o disparo do evento de carregamento da página.
      </td>
    </tr>

    <tr>
      <td>
        [Esperando em AJAX](/attribute-dictionary/?event=AjaxRequest)
      </td>

      <td>
        O horário desde o início da solicitação até o término da atividade AJAX.
      </td>
    </tr>

    <tr>
      <td>
        [Primeira interação](/attribute-dictionary/?event=PageViewTiming&attribute=firstInteraction)
      </td>

      <td>
        O horário desde o início da solicitação até o momento em que a primeira atividade do usuário foi registrada, como um clique do mouse ou uma rolagem.
      </td>
    </tr>

    <tr>
      <td>
        [Interação com a próxima pintura (INP)](/attribute-dictionary/?event=PageViewTiming&attribute=interactionToNextPaint)
      </td>

      <td>
        Core web vitals: mede a rapidez com que uma página da web responde visualmente às ações do usuário, como cliques ou toques.
      </td>
    </tr>

    <tr>
      <td>
        [Pintura com maior conteúdo](/attribute-dictionary/?event=PageViewTiming&attribute=largestContentfulPaint)
      </td>

      <td>
        Core web vitals: o tempo de renderização do maior elemento de conteúdo visível na janela de visualização.
      </td>
    </tr>

    <tr>
      <td>
        [Duração](/attribute-dictionary/?event=BrowserInteraction&attribute=duration)
      </td>

      <td>
        A duração total da sessão.
      </td>
    </tr>
  </tbody>
</table>

## Execução e repintura lenta de JavaScript [#slow-javascript-execution]

Trace da sessão ajuda a identificar o retorno de chamada em seu código JavaScript que é executado lentamente e bloqueia a execução de chamadas subsequentes na thread principal do browser. Essas chamadas devem ser executadas rapidamente para permitir que o browser redesenhe rapidamente a página em resposta às ações do usuário.

Trace da sessão destaca qualquer retorno de chamada maior que 33ms. Se chamado em rápida sucessão (como dentro de um loop `requestAnimationFrame` ), o retorno de chamada com duração superior a 33 ms reduz a taxa de quadros para menos de 30 quadros por segundo. Essa velocidade parece lenta para o usuário.

## Plano de consumo pago [#plan-for-paid-consumption]

Starting June 10, 2024, session trace data will contribute to your overall monthly data consumption. This means it will be charged per your existing order. This change reflects the storage upgrade to the New Relic database (NRDB) which enables [customization of your sampling rate](#configure-sampling-rates), extended data retention, and improved performance.

In the [query builder](https://one.newrelic.com/data-exploration/query-builder), run the query below to view your current monthly consumption of session trace data. Note: If you run it from a [parent account](/docs/accounts/original-accounts-billing/original-users-roles/parent-child-account-structure/#hierarchy), the results will reflect consumption of all child accounts.

```sql
FROM NrConsumption SELECT rate(sum(consumption), 1 month) as monthly_SessionTrace_GBs WHERE usageMetric = 'UnbilledBrowserEventsBytes' SINCE '2024-04-25'
```

<img
  title="Monthly session trace consumption query"
  alt="A screenshot of monthly session trace consumption"
  src={browserMonthlySessionTraceConsumptionQuery}
/>

For a more granular view, run the following query to view your daily consumption for a single child account (if applicable):

```sql
FROM NrConsumption SELECT sum(consumption) as SessionTraceGBs WHERE usageMetric = 'UnbilledBrowserEventsBytes' FACET consumingAccountId, consumingAccountName SINCE '2024-04-25' TIMESERIES 1 day
```

<img
  title="Daily session trace consumption query"
  alt="A screenshot of daily session trace consumption"
  src={browserDailySessionTraceConsumptionQuery}
/>

You can decrease your consumption of session trace data by [adjusting your sampling rates](#configure-sampling-rates) or disabling session tracing.

## Disable session tracing [#disable-tracing]

To disable session tracing in the UI:

1. Vá para

   <DoNotTranslate>**[one.newrelic.com](https://one.newrelic.com/all-capabilities) > All Capabilities > Browser**</DoNotTranslate>

   .

2. Selecione seu aplicativo de browser.

3. No menu à esquerda, clique em

   <DoNotTranslate>**Application settings**</DoNotTranslate>

   .

4. Toggle

   <DoNotTranslate>**Session traces**</DoNotTranslate>

   to

   <DoNotTranslate>**OFF**</DoNotTranslate>

   .