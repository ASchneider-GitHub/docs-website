---
title: NerdGraphQuery
metaDescription: Learn how to work the NerdGraphQuery component
freshnessValidatedDate: '2024-06-03T00:00:00.000Z'
translationType: machine
---

New Relic One SDK proporciona componentes de consulta basados en los componentes de consulta de ApolloClient. Estos componentes son una capa de abstracción que facilita la consulta de NerdGraph sin preocupar por configurar Apollo Client y, para los casos de uso más comunes, sin tener que escribir una consulta GraphQL.

Un componente genérico de consulta de NerdGraph que le permite consultar cualquier cosa desde NerdGraph.

### Uso

```js
import { NerdGraphQuery } from 'nr1'
```

### Ejemplos

#### Ejemplo 1

```js
function render() {
  const query = `
        query($id: Int!) {
            actor {
                account(id: $id) {
                    name
                }
            }
        }
    `;


  const variables = {
    id: 1,
  };


  return (
    <NerdGraphQuery query={query} variables={variables}>
      {({ loading, error, data }) => {
        if (loading) {
          return <Spinner />;
        }


        if (error) {
          return 'Error!';
        }


        return <BlockText>{data.actor.account.name}</BlockText>;
      }}
    </NerdGraphQuery>
  );
}
```

### Props

<table>
  <tbody>
    <tr>
      <td>
        `children` <h5>función</h5>
      </td>

      <td>
        Representar la función de utilería como niño.

        <FunctionDefinition
          returnValue={[{"type":"React.ReactNode","description":""}]}
          arguments={[{"name":"queryResult","type":"QueryResult","description":"Results of the query."}]}
        />
      </td>
    </tr>

    <tr>
      <td>
        `fetchPolicyType` <h5>enumeración</h5>
      </td>

      <td>
        Le permite especificar cómo desea que su consulta interactúe con los datos almacenados en caché.

        * `CACHE_AND_NETWORK`: La consulta devuelve sus datos iniciales del caché si están disponibles. Sin embargo, independientemente de si los datos completos están en su caché o no, la consulta siempre realiza una solicitud empleando su interfaz de red y devuelve los datos actualizados. Esta opción no está disponible cuando se emplea el método estático `query()` del componente.

        * `CACHE_FIRST`: La consulta realiza una solicitud empleando su interfaz de red **solo** si los datos de su consulta aún no están en el caché.

        * `CACHE_ONLY`: La consulta **nunca** realiza una solicitud empleando su interfaz de red. En lugar de eso, devuelve los datos disponibles en el caché. Si los datos de su consulta no existen en la memoria caché, se genera un error.

        * `NETWORK_ONLY`: La consulta **nunca** devuelve los datos iniciales del caché. En lugar de eso, **siempre** realiza una solicitud empleando su interfaz de red.

        * `NO_CACHE`: La consulta **nunca** devuelve los datos iniciales del caché. En lugar de eso, **siempre** realiza una solicitud empleando su interfaz de red. A diferencia de la política `NETWORK_ONLY` , no escribe ningún dato en la caché una vez completada la consulta.

          <OptionReference>
            NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_AND_NETWORK, NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_FIRST, NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_ONLY, NerdGraphQuery.FETCH_POLICY_TYPE.NETWORK_ONLY, NerdGraphQuery.FETCH_POLICY_TYPE.NO_CACHE,
          </OptionReference>
      </td>
    </tr>

    <tr>
      <td>
        `pollInterval` <h5>número</h5>
      </td>

      <td>
        Intervalo en milisegundos para sondear nuevos datos. Establezca en cero para evitar cualquier tipo de sondeo regular.
      </td>
    </tr>

    <tr>
      <td>
        `query` <h5>Cadena</h5><h5>REQUERIDA</h5>|objeto
      </td>

      <td>
        Consulta GraphQL, ya sea como una cadena o un documento GraphQL analizado en un AST mediante el método `gql` de `nr1`.

        ```js
        import { ngql } from 'nr1';

        const query = ngql`
          {
            actor {
              user {
                id
                email
                name
              }
            }
          }
        `;
        ```
      </td>
    </tr>

    <tr>
      <td>
        `skip` <h5>booleano</h5>
      </td>

      <td>
        Cuando se establece en `true`, la consulta se omitirá por completo del procesamiento.
      </td>
    </tr>

    <tr>
      <td>
        `unsafeExperimentalNamespaces` <h5>string\[]</h5>
      </td>

      <td>
        Lista que contiene [espacios de nombres experimentales](https://pages.datanerd.us/unified-api/nerd-graph-docs/graphql/schema_visibility.html#experimental-api-support) no seguros que su consulta decide emplear.
      </td>
    </tr>

    <tr>
      <td>
        `variables` <h5>objeto</h5>
      </td>

      <td>
        Objeto que contiene todas las variables que su consulta necesita ejecutar.
      </td>
    </tr>
  </tbody>
</table>

### Métodos

### `NerdGraphQuery.query`

<FunctionDefinition
  arguments={[{"description":"Object containing the query options. Any `NerdGraphQuery` prop is a valid option except `children` and `pollInterval`.","name":"props","type":"Object"}]}
  returnValue={{"description":"","type":"PromiseQueryResult"}}
/>

### Definiciones de tipos

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":[{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/><TypeDefReference typeDef={{"name":"QueryResult","properties":[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>