---
title: NrqlQuery
metaDescription: Learn how to work the NrqlQuery component
freshnessValidatedDate: '2024-06-03T00:00:00.000Z'
translationType: machine
---

Obtenga datos en CDS mediante una consulta NRQL.

El componente puede devolver datos en un formato compatible con el componente Gráfico.

### Uso

```js
import { NrqlQuery } from 'nr1'
```

### Ejemplos

#### Transformar datos

```js
<NrqlQuery
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    if (data) {
      // change colors to a nice pink.
      data.forEach(({ metadata }) => (metadata.color = '#F00BA5'));
    }


    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

#### Datos de encuesta

```js
<NrqlQuery
  pollInterval={2000}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

#### sondeo automático

```js
<NrqlQuery
  pollInterval={NrqlQuery.AUTO_POLL_INTERVAL}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

### Props

<table>
  <tbody>
    <tr>
      <td>
        `accountId` <h5>Número</h5> <h5>obsoleto</h5>
      </td>

      <td>
        <Callout
          variant="caution"
          title="Vencimiento el 1 de noviembre de 2022"
        >
          La propiedad "accountId" está obsoleta; emplee la propiedad "accountIds" en su lugar.
        </Callout>

        identificador de la cuenta contra la cual ejecutar la consulta NRQL .
      </td>
    </tr>

    <tr>
      <td>
        `accountIds` Numero <h5>requerido</h5> <h5>\[]</h5>
      </td>

      <td>
        identificador de cuentas para ejecutar la consulta NRQL .
      </td>
    </tr>

    <tr>
      <td>
        `children` <h5>función</h5>
      </td>

      <td>
        Representar la función de utilería como niño.

        <FunctionDefinition
          returnValue={[{"type":"React.ReactNode","description":""}]}
          arguments={[{"name":"queryResult","type":"QueryResult","description":"Results of the query."}]}
        />
      </td>
    </tr>

    <tr>
      <td>
        `formatType` <h5>enumeración</h5>
      </td>

      <td>
        Formato de la respuesta.

        <OptionReference>
          NrqlQuery.FORMAT_TYPE.CHART, NrqlQuery.FORMAT_TYPE.RAW,
        </OptionReference>
      </td>
    </tr>

    <tr>
      <td>
        `offset` <h5>número</h5>
      </td>

      <td>
        Offset a aplicar al calcular hora_inicio y hora_final, en milisegundos de época. Este desplazamiento solo se aplica cuando la consulta es abierta, es decir:1. no se especifica end_time y 2. se especifica la duración. Si se cumplen estas condiciones y hay un valor de compensación presente, el end_time efectivo se establecerá para compensar los milisegundos que terminan ahora, mientras que el start_time efectivo se establecerá en (compensación + duración) milisegundos. antes de esa hora_final.
      </td>
    </tr>

    <tr>
      <td>
        `pollInterval` <h5>number|enum</h5>
      </td>

      <td>
        Intervalo en milisegundos para sondear nuevos datos o establecer automáticamente en función de los metadatos de los datos de respuesta.
      </td>
    </tr>

    <tr>
      <td>
        `query` <h5>cadena</h5><h5>REQUERIDA</h5>
      </td>

      <td>
        Consulta NRQL . [Consulte la documentaciónNRQL como referencia](https://docs.newrelic.com/docs/insights/nrql-new-relic-query-language/nrql-reference).
      </td>
    </tr>

    <tr>
      <td>
        `skip` <h5>booleano</h5>
      </td>

      <td>
        Cuando se establece en `true`, la consulta se omitirá por completo del procesamiento.
      </td>
    </tr>

    <tr>
      <td>
        `timeRange` <h5>forma</h5>
      </td>

      <td>
        Intervalo de tiempo para abarcar el intervalo de tiempo de consulta NRQL. Cuando solo se proporciona la duración, se emplea la duración para consultar desde AHORA hasta la DURACIÓN (también conocida como consulta abierta). Cuando se proporcionan la hora_inicial y la hora_final, los emplea para realizar consultas DESDE la hora_inicial HASTA la hora_final (también conocida como consulta cerrada).

        <h3>forma</h3>

        `begin_time` <h5>número</h5>

        `duration` <h5>número</h5>

        `end_time` <h5>número</h5>
      </td>
    </tr>
  </tbody>
</table>

### Métodos

### `NrqlQuery.query`

<FunctionDefinition
  arguments={[{"description":"Object containing the query options. Any `NrqlQuery` prop is a valid option except `children` and `pollInterval`.","name":"props","type":"Object"}]}
  returnValue={{"description":"","type":"PromiseQueryResult"}}
/>

### Definiciones de tipos

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":[{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>

<TypeDefReference typeDef={{"name":"QueryResult","properties":[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>