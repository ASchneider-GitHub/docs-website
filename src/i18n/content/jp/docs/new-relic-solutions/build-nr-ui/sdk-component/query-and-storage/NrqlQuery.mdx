---
title: Nrqlクエリ
metaDescription: Learn how to work the NrqlQuery component
freshnessValidatedDate: '2024-06-03T00:00:00.000Z'
translationType: machine
---

NRQL クエリを介して CDS にデータを取得します。

コンポーネントは、Chart コンポーネントと互換性のある形式でデータを返すことができます。

### 使用方法

```js
import { NrqlQuery } from 'nr1'
```

### 例

#### データの変換

```js
<NrqlQuery
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    if (data) {
      // change colors to a nice pink.
      data.forEach(({ metadata }) => (metadata.color = '#F00BA5'));
    }


    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

#### 投票データ

```js
<NrqlQuery
  pollInterval={2000}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

#### 自動ポーリング

```js
<NrqlQuery
  pollInterval={NrqlQuery.AUTO_POLL_INTERVAL}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```

### 小道具

<table>
  <tbody>
    <tr>
      <td>
        `accountId` <h5>非推奨</h5><h5>番号</h5>
      </td>

      <td>
        <Callout
          variant="caution"
          title="期限：2022年11月1日"
        >
          「accountId」プロパティは非推奨です。代わりに「accountIds」プロパティを使用してください。
        </Callout>

        NRQL クエリを実行するアカウントの識別子。
      </td>
    </tr>

    <tr>
      <td>
        `accountIds` <h5>必須</h5><h5>番号\[]</h5>
      </td>

      <td>
        NRQL クエリを実行するアカウントの識別子。
      </td>
    </tr>

    <tr>
      <td>
        `children` <h5>機能</h5>
      </td>

      <td>
        prop関数を子としてレンダリングします。

        <FunctionDefinition
          returnValue={[{"type":"React.ReactNode","description":""}]}
          arguments={[{"name":"queryResult","type":"QueryResult","description":"Results of the query."}]}
        />
      </td>
    </tr>

    <tr>
      <td>
        `formatType` <h5>enum</h5>
      </td>

      <td>
        応答の形式。

        <OptionReference>
          NrqlQuery.FORMAT_TYPE.CHART、NrqlQuery.FORMAT_TYPE.RAW、
        </OptionReference>
      </td>
    </tr>

    <tr>
      <td>
        `offset` <h5>ナンバー</h5>
      </td>

      <td>
        計算された begin_time と end_time に適用するオフセット (エポック ミリ秒単位)。 このオフセットは、クエリがオープンエンドの場合のみ適用されます。つまり、1. end_time が指定されておらず、duration が指定されている場合。これらの条件が満たされ、offset 値が存在する場合、有効な end_time は現在終了の offset ミリ秒に設定され、有効な begin_time はその end_time の (offset +duration) ミリ秒前に設定されます。
      </td>
    </tr>

    <tr>
      <td>
        `pollInterval` <h5>番号|列挙型</h5>
      </td>

      <td>
        新しいデータをポーリングする間隔（ミリ秒単位）、または応答データのメタデータに基づいて自動的に設定されます。
      </td>
    </tr>

    <tr>
      <td>
        `query` <h5>必須</h5><h5>文字列</h5>
      </td>

      <td>
        NRQL クエリ。[参考として NRQL ドキュメントを参照してください](https://docs.newrelic.com/docs/insights/nrql-new-relic-query-language/nrql-reference)。
      </td>
    </tr>

    <tr>
      <td>
        `skip` <h5>ブール値</h5>
      </td>

      <td>
        `true`に設定すると、クエリはレンダリングから完全にスキップされます。
      </td>
    </tr>

    <tr>
      <td>
        `timeRange` <h5>形</h5>
      </td>

      <td>
        NRQL クエリの時間範囲をスコープする時間範囲。 期間のみが指定されている場合は、期間を使用して NOW から DURATION まで遡ってクエリを実行します (オープン エンド クエリとも呼ばれます)。 begin_time と end_time が指定されている場合は、それらを使用して、SINCE begin_time UNTIL end_time (別名、Closed クエリ) をクエリします。

        <h3>形</h3>

        `begin_time` <h5>ナンバー</h5>

        `duration` <h5>ナンバー</h5>

        `end_time` <h5>ナンバー</h5>
      </td>
    </tr>
  </tbody>
</table>

### メソッド

### `NrqlQuery.query`

<FunctionDefinition
  arguments={[{"description":"Object containing the query options. Any `NrqlQuery` prop is a valid option except `children` and `pollInterval`.","name":"props","type":"Object"}]}
  returnValue={{"description":"","type":"PromiseQueryResult"}}
/>

### 型定義

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":[{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>

<TypeDefReference typeDef={{"name":"QueryResult","properties":[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>