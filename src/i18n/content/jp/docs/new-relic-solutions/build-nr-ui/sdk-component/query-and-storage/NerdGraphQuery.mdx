---
title: ナードグラフクエリ
metaDescription: Learn how to work the NerdGraphQuery component
freshnessValidatedDate: '2024-06-03T00:00:00.000Z'
translationType: machine
---

New Relic One SDK は、ApolloClient のクエリ コンポーネントに基づいたクエリ コンポーネントを提供します。 これらのコンポーネントは抽象化レイヤーであり、Apollo Client の設定を気にすることなく、また、最も一般的なユースケースでは GraphQL クエリを記述することなく、NerdGraph を簡単にクエリできます。

NerdGraph から何でもクエリできる汎用 NerdGraph クエリ コンポーネント。

### 使用方法

```js
import { NerdGraphQuery } from 'nr1'
```

### 例

#### 例1

```js
function render() {
  const query = `
        query($id: Int!) {
            actor {
                account(id: $id) {
                    name
                }
            }
        }
    `;


  const variables = {
    id: 1,
  };


  return (
    <NerdGraphQuery query={query} variables={variables}>
      {({ loading, error, data }) => {
        if (loading) {
          return <Spinner />;
        }


        if (error) {
          return 'Error!';
        }


        return <BlockText>{data.actor.account.name}</BlockText>;
      }}
    </NerdGraphQuery>
  );
}
```

### 小道具

<table>
  <tbody>
    <tr>
      <td>
        `children` <h5>機能</h5>
      </td>

      <td>
        prop関数を子としてレンダリングします。

        <FunctionDefinition
          returnValue={[{"type":"React.ReactNode","description":""}]}
          arguments={[{"name":"queryResult","type":"QueryResult","description":"Results of the query."}]}
        />
      </td>
    </tr>

    <tr>
      <td>
        `fetchPolicyType` <h5>enum</h5>
      </td>

      <td>
        クエリがキャッシュされたデータとどのようにやり取りするかを指定できます。

        * `CACHE_AND_NETWORK`: クエリは、利用可能な場合はキャッシュから初期データを返します。 ただし、完全なデータがキャッシュ内にあるかどうかに関係なく、クエリは常にネットワーク インターフェイスを使用して要求を行い、更新されたデータを返します。 このオプションは、コンポーネントの静的`query()`メソッドを使用する場合は使用できません。

        * `CACHE_FIRST`: クエリのデータがまだキャッシュ内に存在しない場合に**のみ**、クエリはネットワーク インターフェイスを使用して要求を行います。

        * `CACHE_ONLY`: クエリはネットワーク インターフェイスを使用して要求を行うことは**ありません**。 代わりに、キャッシュ内で利用可能なデータを返します。 クエリのデータがキャッシュ内に存在しない場合は、エラーがスローされます。

        * `NETWORK_ONLY`: クエリはキャッシュから初期データを返すこと**はありません**。 代わりに、**常に**ネットワーク インターフェイスを使用して要求が行われます。

        * `NO_CACHE`: クエリはキャッシュから初期データを返すこと**はありません**。 代わりに、**常に**ネットワーク インターフェイスを使用して要求が行われます。 `NETWORK_ONLY`ポリシーとは異なり、クエリの完了後にキャッシュにデータが書き込まれることはありません。

          <OptionReference>
            NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_AND_NETWORK、NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_FIRST、NerdGraphQuery.FETCH_POLICY_TYPE.CACHE_ONLY、NerdGraphQuery.FETCH_POLICY_TYPE.NETWORK_ONLY、NerdGraphQuery.FETCH_POLICY_TYPE.NO_CACHE、
          </OptionReference>
      </td>
    </tr>

    <tr>
      <td>
        `pollInterval` <h5>ナンバー</h5>
      </td>

      <td>
        新しいデータをポーリングする間隔（ミリ秒単位）。 定期的なポーリングを回避するには、ゼロに設定します。
      </td>
    </tr>

    <tr>
      <td>
        `query` <h5>必須の</h5><h5>文字列</h5>| オブジェクト
      </td>

      <td>
        GraphQL クエリ。文字列または`nr1`の`gql`メソッドによって AST に解析された GraphQL ドキュメントのいずれかです。

        ```js
        import { ngql } from 'nr1';

        const query = ngql`
          {
            actor {
              user {
                id
                email
                name
              }
            }
          }
        `;
        ```
      </td>
    </tr>

    <tr>
      <td>
        `skip` <h5>ブール値</h5>
      </td>

      <td>
        `true`に設定すると、クエリはレンダリングから完全にスキップされます。
      </td>
    </tr>

    <tr>
      <td>
        `unsafeExperimentalNamespaces` <h5>文字列\[]</h5>
      </td>

      <td>
        安全でない[実験的なネームスペース](https://pages.datanerd.us/unified-api/nerd-graph-docs/graphql/schema_visibility.html#experimental-api-support)を含むリスト。クエリで使用することをオプトインします。
      </td>
    </tr>

    <tr>
      <td>
        `variables` <h5>物体</h5>
      </td>

      <td>
        クエリを実行するために必要なすべての変数を含むオブジェクト。
      </td>
    </tr>
  </tbody>
</table>

### メソッド

### `NerdGraphQuery.query`

<FunctionDefinition
  arguments={[{"description":"Object containing the query options. Any `NerdGraphQuery` prop is a valid option except `children` and `pollInterval`.","name":"props","type":"Object"}]}
  returnValue={{"description":"","type":"PromiseQueryResult"}}
/>

### 型定義

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":[{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/><TypeDefReference typeDef={{"name":"QueryResult","properties":[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with `graphQLErrors` and `networkError` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not `null`, `fetchMore` allows you to load more results for your query. New data is merged with previous data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}}/>