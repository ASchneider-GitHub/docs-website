---
componentType: default
headingText: Update your code for the Python agent
freshnessValidatedDate: never
---

1. You want to update your code so that the agent initializes when you spin up your script or notebook. Keep in mind that you need to define your app name for the agent to initialize:

    ```py
    newrelic.agent.initialize("newrelic.ini")
    newrelic.agent.register_application(timeout=10)
    ```

2. Add LLM calls with New Relic annotations to a method in your code:

    ```py
        bedrock_runtime = boto3.client("bedrock-runtime", "us-east-1")

        runTitan(bedrock_runtime)
        runAnthropic(bedrock_runtime)
        runAi21(bedrock_runtime)
        runCohere(bedrock_runtime)
        runMeta(bedrock_runtime)
        runTitanEmbedding(bedrock_runtime)
        runCohereEmbedding(bedrock_runtime)    
    ```

3. Add this code snippet to ensure that when you shut down your script or notebook, the agent forwards data from the last 60 seconds to New Relic:

    ```py
        newrelic.agent.shutdown_agent(60)
    ```