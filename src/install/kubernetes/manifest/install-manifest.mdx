---
componentType: default
headingText: Install the Kubernetes integration
---

If you want to use Manifest to install the integration, you have these options:

1. Our guided install, which will provide a plain manifest command with the required fields pre-populated.

2. Manual configuration via the `values.yaml` file.


### Manual configuration via the `values.yaml` file [#manifest-manual]

1. Run this command to add the New Relic Helm charts repository:

    ```shell
    helm repo add newrelic https://helm-charts.newrelic.com
    ```

2. Create a file named `values-newrelic.yaml`. It will define your configuration and follow this structure:

    <Callout variant="important">
    Refer to our Helm installation documentation to know [how to configure it](/docs/kubernetes-pixie/kubernetes-integration/installation/install-kubernetes-integration-using-helm/#configure)
    </Callout>
    
    ```yaml
    global:
      licenseKey: _YOUR_NEW_RELIC_LICENSE_KEY_
      cluster: _K8S_CLUSTER_NAME_
    
    newrelic-prometheus-agent:
      # Automatically scrape prometheus metrics for annotated services in the cluster
      enabled: true
    nri-metadata-injection:
      # Deploy our webhook to link APM and Kubernetes entities
      enabled: true
    nri-kube-events:
      # Report Kubernetes events
      enabled: true
    newrelic-logging:
      # Report logs for containers running in the cluster
      enabled: true
    kube-state-metrics:
      # Deploy kube-state-metrics in the cluster.
      # Set this to true unless it is already deployed.
      enabled: true
    ```
3. Make sure you have correctly configured everything in the chart. Run the following command. Notice that we're specifying `--dry-run` and `--debug`, so nothing is installed in this step:

    ```shell
    helm upgrade --install newrelic newrelic/nri-bundle \
    --namespace newrelic --create-namespace \
    -f values-newrelic.yaml \
    --dry-run \
    --debug
    ```

    Please notice and modify these values:
    
        * `global.licenseKey=YOUR_NEW_RELIC_LICENSE_KEY`. Set it to a valid New Relic <InlinePopover type="licenseKey" /> for your account.
        * `global.cluster=K8S_CLUSTER_NAME`. Set it to identify the cluster in New Relic, so it should be a unique descriptive value.
        * `kube-state-metrics.enabled=true`. Setting it to `true` will automatically install Kube State Metrics (KSM) for you, which is required for our integration to run. You can set this to `false` if KSM is already present in your cluster, even if it's on a different namespace.
        * `newrelic-prometheus-agent.enabled=true`. Set it to `true` to deploy our Prometheus agent, which automatically collects data from Prometheus endpoints present in the cluster.
        * `nri-metadata-injection.enabled=true`. Set it to `true` to install our minimal webhook, which adds environment variables that allow [linking applications instrumented with New Relic APM to Kubernetes](/docs/kubernetes-pixie/kubernetes-integration/link-your-applications/link-your-applications-kubernetes).
    
    <Callout variant="tip">
    Our Kubernetes charts have a comprehensive set of flags and tunables that you can edit to fit your particular needs. Check how to configure the integration below to see what you can modify.
    </Callout>

4. Template the Kubernetes integration. Run this command:

    ```shell
    helm template newrelic newrelic/nri-bundle \
    --namespace newrelic --create-namespace \
    -f values-newrelic.yaml > templated-nri-bundle.yaml
    ```

5. Run this command to apply the manifest generated:

    ```shell
    kubectl -n newrelic apply -f templated-nri-bundle.yaml



