---
componentType: default
headingText: Configuration
---

Update your manifest command with these flags:

    * Set `"newrelic-infrastructure.privileged"`, `"newrelic-infrastructure.controlPlane.enabled"` to `false`.
    * Add `"newrelic-infrastructure.kubelet.config.scheme":"http"`
    * Add `"newrelic-infrastructure.kubelet.config.port":"10255"` 
    * Add  `"logging.enabled":"true"`
    * Add  `"newrelic-logging.lowDataMode":"true"`
    * Add  `"newrelic-logging.fluentBit.linuxMountPath":"/var/log"`
    * Add  `"newrelic-logging.fluentBit.persistence.mode":"persistentVolume"`
    * Add  `"newrelic-logging.fluentBit.persistence.persistentVolume.storageClass":"standard-rwx"`
    * Remove Pixie payload from the command since Pixie isn't currently supported in GKE Autopilot. 

[Fluent Bit](https://fluentbit.io/) can use a FileStore volume to prevent data loss or duplicated logs during Fluent Bit pod restarts or redeploys. Using FileStore incurs additional costs, as charged by Google. We recommend consulting your Google Cloud Admin or visit [FileStore docs](https://cloud.google.com/filestore/pricing) for details. Google FileStore API needs to be enabled in your GKE project. Check this [document](https://support.google.com/googleapi/answer/6158841) to know more about enabling APIs. 

If you don't want to use FileStore add the following:

    * Set `"newrelic-logging.fluentBit.persistence.mode"` to `"none"`
    * Remove `"newrelic-logging.fluentBit.persistence.persistentVolume.storageClass"`

Here's an command that creates a Manifest file then applies it to the cluster:

    ```shell
    KSM_IMAGE_VERSION="v2.10.0" && \
    curl -X POST https://k8s-config-generator.service.newrelic.com/generate -H 'Content-Type: application/json' -d '{"global.cluster":"<Your Cluster Name>","global.namespace":"newrelic","newrelic-infrastructure.privileged":"false","newrelic-infrastructure.controlPlane.enabled":"false","newrelic-infrastructure.kubelet.config.scheme":"http","newrelic-infrastructure.kubelet.config.port":"10255","global.lowDataMode":"true","kube-state-metrics.image.tag":"'${KSM_IMAGE_VERSION}'","kube-state-metrics.enabled":"true","kubeEvents.enabled":"true","newrelic-prometheus-agent.enabled":"true","newrelic-prometheus-agent.lowDataMode":"true","newrelic-prometheus-agent.config.kubernetes.integrations_filter.enabled":"false","logging.enabled":"true", "newrelic-logging.lowDataMode":"true", "newrelic-logging.fluentBit.linuxMountPath":"/var/log", "newrelic-logging.fluentBit.persistence.mode":"persistentVolume", "newrelic-logging.fluentBit.persistence.persistentVolume.storageClass":"standard-rwx","global.licenseKey":"<Your License Key"}'  > newrelic.yaml && (kubectl create namespace newrelic ; kubectl apply -f newrelic.yaml)
    ```