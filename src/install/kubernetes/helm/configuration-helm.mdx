---
componentType: default
headingText: Configuration
---

To configure `nri-bundle` with Helm follow these instructions:

1. Ensure you're using the appropriate context in the machine where you'll run Helm and `kubectl`. Run this command to check the available contexts:
    
    ```shell
    kubectl config get-contexts
    ```
    
    Switch to the desired context running this command:
    
    ```shell
    kubectl config use-context _CONTEXT_NAME_
    ```

2. Run this command to add the New Relic Helm charts repo:

    ```shell
    helm repo add newrelic https://helm-charts.newrelic.com
    ```

3. Create a file named `values-newrelic.yaml`, which will be used to define your configuration:

    ```yaml
    global:
      licenseKey: _YOUR_NEW_RELIC_LICENSE_KEY_
      cluster: _K8S_CLUSTER_NAME_
    
    newrelic-prometheus-agent:
      # Automatically scrape prometheus metrics for annotated services in the cluster
      # Collecting prometheus metrics for large clusters might impact data usage significantly
      enabled: true
    nri-metadata-injection:
      # Deploy our webhook to link APM and Kubernetes entities
      enabled: true
    nri-kube-events:
      # Report Kubernetes events
      enabled: true
    newrelic-logging:
      # Report logs for containers running in the cluster
      enabled: true
    kube-state-metrics:
      # Deploy kube-state-metrics in the cluster.
      # Set this to true unless it is already deployed.
      enabled: true
    ```

4. Make sure everything is configured properly in the chart by running the following command. Notice that we're specifying `--dry-run` and `--debug`, so nothing will be installed in this step:

    ```shell
    helm upgrade --install newrelic-bundle newrelic/nri-bundle \
    --namespace newrelic --create-namespace \
    -f values-newrelic.yaml \
    --dry-run \
    --debug
    ```

