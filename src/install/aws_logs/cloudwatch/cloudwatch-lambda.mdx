---
componentType: default
headingText: Create a Lambda trigger
---

## Create a Lambda trigger [#create-trigger]

Be sure to set up a trigger, not a log subscription, on the ingestion function. If a subscription was set up in the Lambda console, this could lead to a cascade of logs generated and forwarded to New Relic.

To get your logs streaming to New Relic, attach a trigger to the Lambda:

1. From the left side menu, select <DoNotTranslate>**Functions**</DoNotTranslate>.
2. Find and select the previously created `newrelic-log-ingestion` function.
3. Under <DoNotTranslate>**Triggers**</DoNotTranslate>, click <DoNotTranslate>**Add Triggers**</DoNotTranslate>, and select <DoNotTranslate>**CloudWatch Logs**</DoNotTranslate> from the dropdown.
4. Select the the appropriate <DoNotTranslate>**Log group**</DoNotTranslate> for your application.
5. Enter a name for your filter.
6. Optional: Enter a [filter pattern](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/FilterAndPatternSyntax.html).
7. Check the <DoNotTranslate>**Enable trigger**</DoNotTranslate> checkbox, then click <DoNotTranslate>**Add**</DoNotTranslate> to create the trigger.

## Optional: Configure different logging endpoints [#config-endpoints]

You can set a custom logging endpoint if needed, this will allow you for example to use our FedRAMP compliant endpoints.

For that, you should deploy the application and explained above and then:

1. Go to the recently deployed lambda function view in AWS.
2. Scroll down and click on the <DoNotTranslate>**Configuration**</DoNotTranslate> tab.
3. On the left menu inside the <DoNotTranslate>**Configuration**</DoNotTranslate> tab, click on <DoNotTranslate>**Environment Variables**</DoNotTranslate>.
4. Here you can see a list of the already existing environment variables, just click <DoNotTranslate>**Edit**</DoNotTranslate> on the top right of the <DoNotTranslate>**Environment Variables**</DoNotTranslate> table.
5. Update the `NR_LOGGING_ENDPOINT` with the appropiate endpoint:
    - For US: `https://log-api.newrelic.com/log/v1`
    - For EU: `https://log-api.eu.newrelic.com/log/v1`
    - For FedRAMP: `https://gov-log-api.newrelic.com/log/v1`
6. Click <DoNotTranslate>**Save**</DoNotTranslate>.

