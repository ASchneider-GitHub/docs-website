---
componentType: default
headingText: Sample files of the `ibmmq-config.yml`
---

<Tabs>
    <TabsBar>
        <TabsBarItem id="basic">Basic</TabsBarItem>
        <TabsBarItem id="different">Monitor different instances</TabsBarItem>
        <TabsBarItem id="passwordless">PasswordLess</TabsBarItem>
        <TabsBarItem id="filters">Filters</TabsBarItem>
        <TabsBarItem id="mtls">mTLS and basic auth</TabsBarItem>
    </TabsBar>

    <TabsPages>
        <TabsPageItem id="basic">
        This is the basic configuration used to collect metrics:

            ```yml
            integrations:
            - name: nri-ibmmq
                config:
                hostname: localhost
                port: 1414
                queue_manager: QM1
                channel: SYSTEM.DEF.SVRCONN
                username: your_mq_user
                password: your_mq_password
                monitored_queues: '!SYSTEM.*,*'
                monitored_channels: '*'
                monitored_topics: '*'
                monitored_subscriptions: '*'
                exporter_port: 9157
            ```
        </TabsPageItem>
        <TabsPageItem id="different">
            This is the same basic configuration used to collect metrics showing how to run the integration twice connecting to two hosts.
            Notice that each instance of the integration will spawn an extra exporter listening on a different port.

            ```yml
            integrations:
            - name: nri-ibmmq
                config:
                hostname: host1
                port: 1414
                queue_manager: QM1
                channel: SYSTEM.DEF.SVRCONN
                username: your_mq_user
                password: your_mq_password
                monitored_queues: '!SYSTEM.*,*'
                monitored_channels: '*'
                monitored_topics: '*'
                monitored_subscriptions: '*'
            - name: nri-ibmmq
                config:
                hostname: host2
                port: 1414
                queue_manager: QM1
                channel: SYSTEM.DEF.SVRCONN
                username: your_mq_user
                password: your_mq_password
                monitored_queues: '!SYSTEM.*,*'
                monitored_channels: '*'
                monitored_topics: '*'
                monitored_subscriptions: '*'
            ```
        </TabsPageItem>
        <TabsPageItem id="passwordless">
            If the password is not specified, user/password authentication is disabled and you shouldn't specify the username in the configuration.

            The exporter will try to connect sending as `clientID` the user executing the integration. Depending on the agent installation mode it could be `root` or `nri-agent`.

            Such user needs to be able to access the queue manager without providing a password.

                ```yml
                integrations:
                - name: nri-ibmmq
                    config:
                    hostname: localhost
                    port: 1414
                    queue_manager: QM1
                    channel: SYSTEM.DEF.SVRCONN
                    monitored_queues: '!SYSTEM.*,*'
                    monitored_channels: '*'
                    monitored_topics: '*'
                    monitored_subscriptions: '*'
                    exporter_port: 9157
                ```
        </TabsPageItem>
        <TabsPageItem id="filters">
        This is the basic configuration using filters to restrict the monitored queues.<br/>In this example we monitor all queues named `DEV.QUEUE` and specifically ignore queue `DEV.QUEUE.1`. You can add other patterns separated by commas:

                ```yml
                integrations:
                - name: nri-ibmmq
                    config:
                    hostname: localhost
                    port: 1414
                    queue_manager: QM1
                    channel: SYSTEM.DEF.SVRCONN
                    username: your_mq_user
                    password: your_mq_password
                    monitored_queues: 'DEV.QUEUE*,!DEV.QUEUE.1'
                    monitored_channels: '*'
                    monitored_topics: '*'
                    monitored_subscriptions: '*'
                    exporter_port: 9157
                ```
        </TabsPageItem>
        <TabsPageItem id="mtls">
            This is an advanced configuration showing how to setup mTLS.
            The `ccdt` file should indicate which certificate to present to the server thorugh the `certificateLabel` field of the `transmissionSecurity` section.
            The certificate should be in the keystore with such label and trusted by the server.
            Morever, the Keystore should contain a certificate capable of verifying the one presented by the server.

                ```yml
                integrations:
                - name: nri-ibmmq
                    config:
                    queue_manager: QM1
                    channel: SYSTEM.DEF.SVRCONN
                    username: your_mq_user
                    password: your_mq_password
                    monitored_queues: 'DEV.QUEUE*,!DEV.QUEUE.1'
                    monitored_channels: '*'
                    monitored_topics: '*'
                    monitored_subscriptions: '*'
                    exporter_port: 9157

                    # Configuring mTLS
                    mqsslkeyr: "/key"
                    ccdt_url: "file:///ccdt.json"
                    home: /tmp
                ```
        </TabsPageItem>
    </TabsPages>
</Tabs>

