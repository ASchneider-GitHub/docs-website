---
componentType: default
headingText: Configure the Node agent
---

You installed a Node agent in the last step, but your agent hasn't been configured to collect AI data like LLM events. This step has you apply those configurations. For AI data, you need to enable the `ai_monitoring` flag.

1. We recommend applying these configurations from `newrelic.js`. If you have a more complex set up with multiple environments, you can configure with environment variables.

    <CollapserGroup>
        <Collapser
            id="config-file"
            title="Enable through `newrelic.js`"
        >

    ```js
    ai_monitoring: {
        enabled: true
    }
    ```   

        </Collapser>
        <Collapser
            id="config-enviro"
            title="Enable with environment variables"
        >

    ```bash
    NEW_RELIC_AI_MONITORING_ENABLED=true
    ```

        </Collapser>
    </CollapserGroup>


2. You've programmed your agent to collect AI data and can start observing your AI app's performance. These recommended configurations let you control the kind of data the agent ingests:


    <table>
        <tbody>
            <tr>
                <td>
                Enable distributed tracing, if disabled. (Enabled by default) 
                </td>
                <td>
                        `distributed_tracing.enabled = true`
                </td>
            </tr>
            <tr>
                <td>
                    Set a limit for how many custom events the agent records. These events track message contents and token usage.
                </td>
                <td>
                    `custom_insights_events.max_samples_stored`
                </td>
            </tr>
            <tr>
                <td>
                    Set a limit for the number of sample spans the agent records. These spans capture when an operation occurred in your app code, how long it took to complete, and other operations it relates to.
                </td>
                <td>
                    `span_events.max_samples_stored`
                </td>
            </tr>
        </tbody>
    </table>

    Limits correspond to how much sampling the agent does. A higher limit, for example, means less sampling, which gives a more complete picture of your app's performance, but also means higher ingest costs and higher memory usage.