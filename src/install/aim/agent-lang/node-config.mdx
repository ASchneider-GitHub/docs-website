---
componentType: default
headingText: Configure the Node agent
---

You installed a Node agent in the last step, but your agent hasn't been configured to collect AI data like LLM events. This step has you apply those configurations so AIM initializes at app runtime. 

1. We recommend applying these configurations from `newrelic.js`. If you have a more complex set up with multiple environments, you can configure with environment variables: 

        <CollapserGroup>
            <Collapser
                id="config-file"
                title="Enable through `newrelic.js`"
            >

        ```js
        ai_monitoring: {
            enabled: true
        }
        ```   

            </Collapser>
            <Collapser
                id="config-enviro"
                title="Enable with environment variables"
            >

                ```bash
                NEW_RELIC_AI_MONITORING_ENABLED=true
                ```
            </Collapser>
        </CollapserGroup>

2. We recommend that setting limits when you configure the agent. 

    * Limits tell your agent how much to sample events or span. 
    * A higher limit means less sampling, which gives a more complete picture of your app's performance, but also means higher ingest costs and higher memory usage.

    These recommended configurations let you control how the agent ingests data:

        <CollapserGroup>
            <Collapser
                id="events-limit"
                title="Set event limits"
            >
            Set a limit for how many custom events the agent records. These events track message contents and token usage.

            With `newrelic.js`:

                `custom_insights_events.max_samples_stored`

            With environment variables:

                `NEW_RELIC_CUSTOM_INSIGHTS_EVENTS_MAX_SAMPLES_STORED`
            </Collapser>
            <Collapser
                id="span-limits"
                title="Set span limits"
            >
            
            Set a limit for how many sample spans the agent records. Spans capture when an operation occurred in your app code, how long it took to complete, and other operations it relates to. 

            With `newrelic.js`:

                `span_events.max_samples_stored`
            
            With environment variables:

                `NEW_RELIC_SPAN_EVENTS_MAX_SAMPLES_STORED`
            </Collapser>
        </CollapserGroup>

<Callout variant="tip">
If you've disabled distributed tracing, you'll need to turn it back on: `distributed_tracing.enabled = true`   
</Callout>

