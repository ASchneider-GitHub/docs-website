---
componentType: default
headingText: Configure the Ruby agent
freshnessValidatedDate: never
---

AI Monitoring introduces two new configuration options to the Ruby agent: 

* `ai_monitoring.enabled`, default: `true` 
Indicates whether LLM instrumentation will be registered. If this is set to `false`, no metrics, events, or spans related to AI Monitoring will be sent. Currently, this equates to the same thing as `instrumentation.ruby_openai`, but as we add support for more AI monitoring libraries, you can use this configuration as a overall switch to disable instrumentation for them as well. This configuration is set to `false` when high security mode is enabled.

* `instrumentation.ruby_openai`, default: `auto`
This configuration controls the way instrumentation for the `ruby-openai` gem is installed in your application. `auto` will default to adding the instrumentation via module prepending and is the same as setting this value to `prepend`. Other valid options are `chain`, to install the instrumentation with alias method chaining, and `disabled` which will skip instrumentation. The instrumentation will only attempt to install if `ai_monitoring.enabled` is true, and your application uses a version of `ruby-openai` >= 3.4.0.

In addition, you may want to adjust these existing configuration options to improve your AI Monitoring experience:

* `distributed_tracing.enabled: true` When Distributed Tracing is enabled on your application, you'll be able to connect your AI Monitoring events with your traces. 

* `span_events.max_samples_stored: 10_000` Increasing this configuration to the maximum value of 10,000 will minimize sampling of AI-related distributed traces.

* `custom_insights_events.max_samples_stored: 100_000` Increasing this configuration to the maximum value of 100,000 will minimize sampling of AI-related events and any custom events your application currently sends.