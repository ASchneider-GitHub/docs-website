---
title: Automated monitoring of EC2 instances
tags:
  - Infrastructure
  - Automated monitoring of EC2 instances
  - EC2 instances
  - AWS Systems Manager Distributor
  - Amazon Elastic Compute Cloud
metaDescription: Automated monitoring of EC2 instances
freshnessValidatedDate: never
---

New Relicâ€™s EC2 integration instruments your instances by installing our infrastructure agent on them using CloudFormation template. The agent is a lightweight executable file that collects data about your instances. It also forwards data from infrastructure integrations to New Relic and forwards log data for log analytics. This document walks you through the prerequistes and steps to install infrastructure agent on EC2 instances.
## Prerequisites [#prereq]

* Necessary IAM role for installing CloudFormation template
* EC2 instances must have the public IP address enabled
* The Amazon Machine Image (AMI) of instance must have the SSM Agent installed. Note: Most AMIs already include the SSM Agent by default. Refer [here](https://docs.aws.amazon.com/systems-manager/latest/userguide/ami-preinstalled-agent.html) for list of AMIs with SSM Agent Preinstalled.
* EC2 instance must have the necessary permissions to interact with SSM. The instance profile/role should be attached with the policy "AmazonSSMManagedInstanceCore"
* The VPC subnet associated with the instance must have a route table connected to an internet gateway
* Finally, have a New Relic account and a corresponding license key. Refer [here](https://docs.newrelic.com/docs/apis/intro-apis/new-relic-api-keys/) on how to get New Relic license key

To deploy this template in multiple Regions, Accounts and Organisational Units, one must have these [permissions](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-prereqs.html).

## Steps to enable automated monitoring of instances

1. Follow all the prerequisites mentioned above
2. Deploy the [CloudFormation template](https://github.com/aws-quickstart/quickstart-ct-newrelic-one/blob/main/templates/EC2_Quickstart.yml) on your account and fill in required fields.
 Tag Key Value pair associated with the EC2 instances where you want NewRelic infrastructure agent to be installed. The New Relic Infrastructure Agent will only be installed on instances that have that specific key-value pair tag else it will install on all by default.
3. Once deployment is finished, you can monitor detailed logs and metrics of qualified old and new EC2 instances of an AWS account in New Relic.

<Callout variant="important">
    All instances will get updated with the latest New Relic Infrastructure Agent monthly once.
</Callout>
