---
title: New edition of browser SPA monitoring
tags:
  - Browser
  - Single page app monitoring
translate:
  - jp
metaDescription: New Relic browser SPA monitoring examines your users' experience with the frontend logic for single-page apps or any apps that pull content dynamically.
freshnessValidatedDate: 02-01-2024
---

<Callout variant="important">
This feature is currently in public preview. We encourage you to give us feedback on this feature by [creating a GitHub issue](https://github.com/newrelic/newrelic-browser-agent/issues).
</Callout>

Our browser monitoring capability for single page applications (SPAs) is getting a refresh. 

## Why are things changing?

Over the past couple of years, we have received numerous complaints and support cases from customers regarding the flaws of our current Pro+SPA agent. This includes:

* Total inability to use the latest released version of this agent type due to unresolveable third-party conflicts or failure to capture interactions.
* SPA patches meant to fix one issue causes another.
* Conflicts with your other third party libraries due to wrapping of globals, predominantly Promises, that breaks code functionality.
* Performance issues, from slow down to freezes, due to conflict with other code that frequently use timers, RAF, and/or promise chaining.

We expect the Pro+SPAv2 to resolve these cases. Not wrapping around these globals would also provide an execution speed boost.


## What's changing?

Existing SPA feature, by default, captured interaction in this way: UI event -> route change. In addition, it tracked things such as XHR/fetch, timers, and requestAnimationFrame in determining when the interaction is finished, which is when everything finish execution.

The new spa captures interaction in this way: UI event (specifically: click, keydown, submit) -> route change -> DOM modification. This follows Google Chrome’s soft navigation heuristics. Nothing else is tracked, and the interaction finishes on the next frame following the DOM change.

For the large part, what’s reported isn’t changing. You will still see BrowserInteractions on your browser entity dashboard in NR. 
However, we no longer report any JS execution or callback duration with our interactions.
The duration of interactions is expected to drop significantly for route-change. Initial page load interactions ought to remain constant, as that is based on the page’s load event time.
In accordance with the shorter durations, we expect AjaxRequest and JavascriptError events tied to BrowserInteractions to lessen. You may see those events previously associated with an interaction become disassociated without any change to your website code.

The current SPA API remains the same, and we do not anticipate any problems with your usage of them. 
* newrelic.interaction() will still start an interaction if one is not already in progress. The API-created interaction follows the same heuristic for determining its completion.
* newrelic.interaction({ waitForEnd: true }) is now available for use if the in-progress or new interaction should be kept open until .end() is called on it. This allows its completion to be changed and customized if, for example, you do not agree with the default ending.
* The only function that is being deprecated is createTracer: it will no longer keep interactions open or time the provided callback argument. However, the returned wrapped function is still executable, so it remains functional, and our data shows this is very infrequently used.

## Try out browser SPA monitoring 2.0 

<Steps>

    <Step>
        ### Review the requirements

        This feature is tested and supported inline with our standard browser support statement <link to it here>.


    </Step>

    <Step>
        ### Add the feature flag to your browser agent

         If your agent was installed with the APM method, contact our support team and we'll enable the feature flag on your account.
         
         If your agent was installed with the copy/paste method, you'll need to add a feature flag and re-paste the JavaScript agent code into your web HTML.

            1. Find the New Relic browser code in your webpage HTMl.

            2. In the `init` configuration object, add the `soft_nav` feature flag. Here's an example:

                ```js
                <script type="text/javascript"> ;window.NREUM||(NREUM={});init={ …, feature_flags: ['soft_nav'] }:
                ```

            3. Deploy your app.

        Need to disable this feature? Simply remove the feature flag.
            
    </Step>

    <Step>
        ### Confirm data is being sent to New Relic

        The first thing to check is asking yourself “does my interaction follow the heuristic described above?” Make sure the conditions are met for the default interaction to finish.

        Next, check your network tab in your browser’s dev tools. Filter for requests going to /events/1/. There should be ones for which the payload begins with bel.7;1, indicating your interaction(s) is(are) being captured and sent.

        Finally, interaction data should continue to flow into your browser entity dashboards and charts.


</Steps>

## Next Steps [#next-steps]

If you have comments or suggestions that don't require any action or response, please email the browser team at `browser-agent@newrelic.com`, starting the subject line with `[SoftNav]`.

For issues or deeper discussions, [create a GitHub issue](https://github.com/newrelic/newrelic-browser-agent/issues).

