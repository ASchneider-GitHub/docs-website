---
title: Browser SPA monitoring 2.0
tags:
  - Browser
  - Single page app monitoring
translate:
  - jp
metaDescription: The new browser SPA monitoring capability is a streamlined way to monitor your users' experience and app performance.
freshnessValidatedDate: 02-01-2024
---

We're excited to announce an overhaul of our Pro+SPA agent, built to address numerous pain points voiced by our customers. This update tackles critical limitations of the current agent, paving the way for a smoother, more optimized, and future-proof SPA monitoring experience.

<Callout variant="important">
    This release is currently in optional trial mode for any browser customer who wants to explore the new features and provide your feedback. The current SPA experience will be gradually phased out as we prepare for a full rollout to all SPA monitoring customers.
    </Callout>

## Painpoints addressed

* Unusable latest versions: Frequent conflicts with third-party libraries and unreliable interaction capture plagued the existing agent, often rendering the latest version unusable.
* Patchwork solutions: Addressing one issue with SPA patches often introduced another, creating a frustrating cycle of fixes and regressions.
* Third-party library conflicts: Global wrapping, particularly around Promises, often disrupted code functionality due to conflicts with other libraries.
* Performance bottlenecks: Conflicts with code using timers, RAF, and promise chaining led to performance issues, ranging from slowdowns to freezes.

The Pro+SPAv2 agent is designed to eliminate these problems and provide a significantly improved monitoring experience. Key changes include:

* Unwrapped execution: By not wrapping core globals, Pro+SPAv2 unleashes execution speed boosts for your SPAs.
* Aligned with SoftNav heuristics: The new agent adopts Google Chrome's soft navigation heuristics, providing more accurate interaction tracking and improved alignment with browser behavior.
* Simplified interaction determination: Interactions are now defined as UI event (click, keydown, submit) -> route change -> DOM modification, offering a clearer and more efficient capture approach.
Focus on key metrics: While reported data remains largely unchanged, the new agent no longer tracks JS execution or callback duration within interactions, streamlining the reported information.

## Impact and user experience

Changes to the SPA monitoring include:

* Reduced interaction durations: Expect significantly shorter interaction durations, particularly for route changes. Initial page load interactions should remain stable.
* Potential event disassociation: You might observe previously associated `AjaxRequest` and `JavascriptError` events becoming disassociated from interactions, reflecting the focus on UI-driven interactions.
* API compatibility: The current SPA API remains entirely compatible, ensuring seamless integration with your existing code.
* Enhanced control: The new [`newrelic.interaction({ waitForEnd: true })`](/docs/browser/new-relic-browser/browser-apis/interaction/) API function empowers you to customize interaction completion behavior if needed.
* Deprecated `createTracer`: While still functional, the `createTracer` function is deprecated as it no longer keeps interactions open or times callbacks. Our data indicates minimal usage of this function.

We're confident that Pro+SPAv2 represents a significant leap forward in SPA monitoring capabilities. By addressing past issues and embracing modern browser heuristics, we're committed to providing you with the best possible experience for monitoring your single-page applications.

## Try out browser SPA monitoring 2.0 

<Steps>

    <Step>
        ### Review the requirements

        This feature is tested and supported inline with our standard browser support statement <link to it here>.


    </Step>

    <Step>
        ### Add the feature flag to your browser agent

        If your agent was installed with the APM method, contact our support team and we'll enable the feature flag on your account.
        
        If your agent was installed with NPM or the UI copy/paste method, you'll need to add a feature flag in the browser agent code:

            1. Find the New Relic browser code in your webpage HTMl.

            2. In the `init` configuration object, add the `soft_nav` feature flag. Here's an example:

                ```js
                <script type="text/javascript"> ;window.NREUM||(NREUM={});init={ …, feature_flags: ['soft_nav'] }:
                ```

            3. Deploy your app.

        Need to disable this feature? Simply remove the feature flag.
            
    </Step>

    <Step>
        ### Confirm data is being sent to New Relic

        The first thing to check is asking yourself “does my interaction follow the heuristic described above?” Make sure the conditions are met for the default interaction to finish.

        Next, check your network tab in your browser’s dev tools. Filter for requests going to /events/1/. There should be ones for which the payload begins with bel.7;1, indicating your interaction(s) is(are) being captured and sent.

        Finally, interaction data should continue to flow into your browser entity dashboards and charts.

    </Step>

</Steps>

## Known issues [#known issues]

* API usage:

    * `newrelic.interaction().end()` workaround: If you previously used this to address interaction closure issues, you might now see extra, unnecessary interactions. Review your usage to ensure optimal results.
    * `createTracer()` functionality change: `createTracer()` no longer keeps interactions open or times callbacks. If you relied on this for tracking JS code, explore alternative approaches.

* AjaxRequest association:
    * Potential exclusion from interactions: Ajax requests that initiated near the end of previous interactions might now be excluded due to shortened interaction durations.
    * Manual extension: If you need a request to be attributed to a specific interaction, use the `waitForEnd: true` option within `newrelic.interaction()` and manually end it after the request starts.

## Leave feedback [#feedback]

For actionable feedback, submit a GitHub issue report any bugs, feature requests, or performance improvements related to SoftNav: [https://github.com/newrelic/newrelic-browser-agent/issues](https://github.com/newrelic/newrelic-browser-agent/issues)

For general feedback, share your thoughts and suggestions about SoftNav by emailing `browser-agent@newrelic.com` with a subject line starting with "[SoftNav]."

