---
title: "Session replay"
metaDescription: "Play back user interactions to debug faster and improve page performance."
---

import browserSessionReplayDetails from 'images/browser_screenshot-full_session-replay-details.webp'

import browserTextMaskingExample from 'images/browser_screenshot-full_text-masking-example.webp'

import browserErrorsInboxSessionReplay from 'images/browser_screenshot-full_errors-inbox-session-replay.webp'


Session replay is our latest browser monitoring feature that allows you to play back user interactions on your web app, alongside your app's telemetry data. Session replay can be used for a variety of purposes, including:

* **Troubleshooting JavaScript errors**: Troubleshoot the cause of an error by showing you what the user was doing when the error occurred. For example, if a customer receives an error while trying to complete an ecommerce transaction, you can use session replay to see which steps they took and what data they entered before the error occurred. This can help you quickly identify the root cause of the problem and fix it.
* **Improving the user experience**: Discover areas of your web app that are causing users frustration. For example, you might see that users are clicking on buttons that don't do anything, or that they are getting lost in your navigation.
* **Optimizing performance**: Identify areas of your web app that are causing performance problems. For example, you might see that users are waiting a long time for pages to load, or that they are experiencing slowness when interacting with your app.

<img
    title="Session replay details"
    alt="Screenshot of session replay details"
    src={browserSessionReplayDetails}
/>

    <figcaption>
  **[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Browser > (select an app) > Session replay**.
</figcaption>

## Overview [#how-it-works]

Session replay works by taking a snapshot of the DOM (Document Object Model) when a web page loads. The DOM is a hierarchical representation of all the elements on a web page, such as the text, images, and buttons. The browser agent uses a library to record DOM changes as the user interacts with the page. This data is then stored in New Relic's database and can be replayed up to 8 days after the session occurred. The replay is pixel-perfect, so you can see exactly what the user saw on their screen.

## User data collection [#user-data]

We are not storing screenshots or videos. We are storing the state changes to the DOM that need to be replayed in order to recreate what the user saw in their browser. This is a much smaller amount of data. Privacy settings are enforced client-side, and our default privacy settings help you to further limit any sharing of sensitive customer data.

## Impact on app performance [#performance-impact]

Session replay will not load until after the page has fully loaded, so it should not affect early page load performance at all. Once it is loaded, session replay works by observing mutations to the DOM and reporting them as small, compressed payloads. The size of these payloads depends on the size and complexity of your DOM tree. The larger and more complex the DOM tree, the more work session replay needs to do to track a replay effectively.

Payload size can also increase if the DOM is large. However, session replay uses a number of techniques to reduce payload size, such as GZIP compression, reducing duplication, and managing payload harvests. It should only send a large (compressed) payload when the full DOM is captured, which typically only happens when the replay feature is first imported. After that, it will only send small payloads that relate to the end-user's actions.

## Retention [#retention]

Replays have a standard retention period of 8 days.

## Get started [#get-started]

<Steps>

  <Step>
    ### Enable session replay settings [#enable-settings]

    1. Go to **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > All Capabilities > Browser**.
    2. Select your browser app.
    3. In the left-hand menu, click  **Application settings**.
    2. On the Application settings page, make sure **Pro** or **Pro + SPA** browser agent is selected. Session replay is not available for the Lite browser agent.
    3. Toggle ON **Session tracking** and **Session replay** settings.
    </Step>

  <Step>
    ### Configure session sampling rates [#configure-sampling-rates]
    
    Make selections for the following sampling rates:

    * **Session sampling rate** records a random sample of all user sessions.

    * **Errored session sample rate** records a random sample of all errored sessions. The agent buffers for up to 30 seconds on the client-side, and if errors occur, the session will be recorded. If an error does not occur, the replay is not harvested. 

For example, if you set the session sampling rate to 50% and the error sampling rate to 100%, it means that:

* Half of all user sessions will be recorded.
* All errored sessions will be recorded, even if they are not part of the 50% sample.

  </Step>

    <Step>
    ### Configure privacy settings [#configure-privacy-settings]

    New Relic takes your data privacy seriously. Our default, recommended setting is to mask everything, which replaces all text with asterisks (*). 

    Here's an example of how a replay looks with the default privacy settings where all text is masked:



    <img
        title="Example of default privacy settings"
        alt="Example of default privacy settings"
        src={browserTextMaskingExample}
    />

    <figcaption>
        Example of default privacy settings.
    </figcaption>

However, if you want to modify these privacy settings, you can choose specific classes and attributes to mask, block, or ignore:

    * **Mask** means specific text will be replaced with asterisks (*). For example, you could mask sensitive user input such as login information.

    * **Block** means content will be replaced with an empty placeholder. For example, if you have a video playing on your About Us webpage and don’t want it captured, you could block the class that contains that video.

    * **Ignore** means user input will be ignored entirely. For example, if you want to ignore sensitive information like a user-inputted email address and password, you could ignore the element that contains that field and all user input would be blocked from replays.

 <Callout variant="caution">
    Always check with your privacy teams if you decide to customize settings. Exposing user input can expose sensitive data.
    </Callout>

#### Masking [#mask]

If you want to customize exactly what is masked with asterisks, you have a few options:

* Add your own CSS selectors to the UI settings
* Check boxes in the UI settings for masking specific user input elements
* Add our CSS class `nr-mask` or attribute `data-nr-mask` to your webpage HTML.
For example, if you want to mask user-entered email address, add `nr-mask` to your email class attribute in `<div>`:

```html
<div class="email-input nr-mask">
  <input type="email" name="email" placeholder="Enter your email address">
</div>
```

These options use an asterisk (*) to mask all text in that element, hiding the actual text but revealing the number of characters entered. However, asterisks are not valid numbers, so masking number type-specific fields such as telephone or credit card numbers will result in a blank field in a replay.

#### Blocking [#block]

If you want to fully block specific classes or attributes, you have a few options:

* In the settings UI, add your own CSS selectors in the Block Selectors field (for example, `[autocomplete="cc-number"]`).
*  Manually add our CSS class `nr-block` or attribute `data-nr-block` to your webpage HTML. For example, if you wanted to block irrelevant text and images from session replay, add `nr-block` to `<div class>`:

```html
<html>
<head>
  <title>Sample image and text</title>
</head>
<body>
  <div class="image-text-container nr-block">
    <img src="https://example.com/image.png" alt="Image description">
  </div>
</body>
</html>
```

#### Ignoring [#ignore]

If you want to ignore user input completely, add our CSS class `nr-ignore` to the input field’s class name. For example, if you want to ignore sensitive information on a billing page, add `class="nr-ignore"` to `<input type>`:

```html
<div class="sensitive-information">
  <h2>Sensitive Information</h2>
  <p>Credit card number: <input type="number" class="nr-ignore" id="creditCardNumber"></p>
  <p>Expiration date: <input type="number" class="nr-ignore" id="expirationDate"></p>
  <p>CVV code: <input type="number" class="nr-ignore" id="cvvCode"></p>
</div>
```

  </Step>

      <Step>
    ### (Copy/paste deployment method) Manually update the JavaScript snippet [#update-snippet]

    If you're using the browser agent deployment method of manually pasting the browser agent snippet into your code, you'll need to do this again now that session replay is enabled:

    1. On the Application Settings pages, click **Save**, then scroll to the top.
    2. Copy the code snippet and paste it into your code.
    3. Deploy your app again. 

  </Step>



<Step>

### View replays [#view-data]

Once you've set up session replay, you can view replays in two places:

  * On the Session replay page: 
        1. Go to **[one.newrelic.com](https://one.newrelic.com/all-capabilities) > All Capabilities > Browser**.
        2. Select your browser app.
        3. In the left-hand menu, scroll down and click **Session replay**.
        4. Click into each replay to view session details.

  * On the Errors inbox page: 
        1. In the browser left-hand menu, click **Errors**.
        2. Click on the Triage and Group errors pages to see replays attached to errors.

<img
    title="Replays in errors inbox"
    alt="Screenshot of replays in errors inbox"
    src={browserErrorsInboxSessionReplay}
/>


<figcaption>
    View a replay queued up to 5 seconds before an error occurred to see what the user was doing on the page.
</figcaption>


</Step>

</Steps>

## Troubleshoot missing data

Not seeing data? If you have enabled the session replay feature but you are not seeing any data, here are some possible reasons:

* Check your sampling rates. There is sampling for both replays and errors.
* Make sure you have permission to view replays.
* Are you using the Pro or Pro+SPA browser agent? Session replay does not work with the Lite browser agent.
* In the Errors Inbox, you can use the toggle to show only errors with replays. This will filter your views so that you always see a replay. Replays have a standard retention period of 8 days.
* If you’re using the APM deployment method, you may need to wait a while for session replay to be automatically enabled. If you’re still not seeing data, restart the agent.