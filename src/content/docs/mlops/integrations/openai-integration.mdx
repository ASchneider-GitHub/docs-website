---
title: OpenAI integration
metaDescription: "A lightweight tool to monitor your OpenAI workload."
freshnessValidatedDate: never
---

import modelperformancemonitoringOpenAIDashboard from 'images/model-performance-monitoring_screenshot-crop_openai-dashboard-1.webp'

With New Relic's GPT series application integration, you have the ability to seamlessly monitor all OpenAI queries. By adding just two lines of code, your team can gain access to key performance metrics such as cost, response time, rate limits, error rates, chat history, and sample inputs and outputs. Our GPT integration provides real-time metrics to help businesses optimize usage, reduce costs, and achieve better results.

This guide will show you how to integrate you OpenAI GPT applications so you can start monitoring your usage.

Once you instrument find OpenAI observability data under **Model Performance** >  **Application**.

<img
  title="OpenAI dashboard"
  alt="OpenAI dashboard"
  src={modelperformancemonitoringOpenAIDashboard}
/>

<CollapserGroup>
  <Collapser 
    id="install-with-python" 
    title="Install with Python"
  >

<Steps>
<Step>
### With pip

```bash
pip install nr-openai-observability
```
</Step>
<Step>
### Set your environment variable [#set-environment-variable]

Get your <InlinePopover type="licenseKey" /> (also referenced as `ingest - license`) and set it as environment variable: `NEW_RELIC_LICENSE_KEY`. [Click here](/docs/apis/intro-apis/new-relic-api-keys/#license-key) for more details and instructions.

```bash
export NEW_RELIC_LICENSE_KEY=<license key>
```

```python
import os
os.environ["NEW_RELIC_LICENSE_KEY"] = "<license key>"
```

`NEW_RELIC_LICENSE_KEY` can also be sent as a parameter at the `monitor.initialization()` call.

If you are reporting data to the New Relic EU region please follow [these](docs/mlops/integrations/openai-integration/#EU-account-users) instructions.
</Step>

<Step>
### Modify your code [#modify-code]

Add the following two lines to your code:

```python
from nr_openai_observability import monitor
monitor.initialization()
```
</Step>
<Step>
### Add your dashboard [#add-dashboard]

Follow the instruction to add the dashboard to your New Relic account:

```python
import os

import openai
from nr_openai_observability import monitor

monitor.initialization()

openai.api_key = os.getenv("OPENAI_API_KEY")
openai.Completion.create(
    model="text-davinci-003",
    prompt="What is Observability?",
    max_tokens=20,
    temperature=0 
)
```
</Step>
</Steps>
 </Collapser>



<Collapser 
    id="install-with-node" 
    title="Install with Node.js"
  >
<Steps>
<Step>
### Install OpenAI [#install-openai-node]

Use your favorite package manager and run:

```
npm install @newrelic/openai-observability openai
```
</Step>
<Step>
### Getting started [#getting-started-node]

Call `monitorOpenAI` with the `openAI`instance. 

Here is some example code:

```
import { Configuration, OpenAIApi } from 'openai';
import { monitorOpenAI } from '@newrelic/openai-observability';

const configuration = new Configuration({
  apiKey: 'OPENAI_API_KEY',
});

const openAIApi = new OpenAIApi(configuration);

monitorOpenAI(openAIApi, {
  applicationName: 'MyApp',
  newRelicApiKey: 'NEW_RELIC_LICENSE_KEY',
});

const response = await openAIApi.createChatCompletion({
  model: 'gpt-3.5-turbo',
  messages: [{ role: 'user', content: 'What is Observability?' }],
});

console.log(response.data.choices[0].message);
```

Make sure that you add module type to package.json:

```
"type": "module"
```
</Step>

<Step>
### Initialization options [#modify-code]

```
export interface MonitorOpenAIOptions {
  /**
   * Your application name in New Relic, must provided.
   */
  applicationName: string;
  /**
   * API key with insert access used to authenticate the request.
   * For more information on creating keys, please see:
   * https://docs.newrelic.com/docs/insights/insights-data-sources/custom-data/introduction-event-api#register
   */
  newRelicApiKey?: string;
  /**
   * Optional host override for event endpoint.
   */
  host?: string;
  /**
   * Optional port override for trace endpoint.
   */
  port?: number;
}
```
</Step>
<Step>
### Environment variables [environment-variables-node]

You can use your configured environment variable for initialization options:

`NEW_RELIC_LICENSE_KEY - API`: Key with insert access used to authenticate the request.

`NEW_RELIC_INSERT_KEY`: Same as API key.

`EVENT_CLIENT_HOST`:  Optional host override for events endpoint.
</Step>
<Step>
### Test 

If you are contributing to the package, make sure the tests are passing or update them is needed. To run the tests:

```
$ npm run test
```
It's important to note that  `monitor.integration` test requires `.env.test` file with `OPENAI_API_KEY` configured.
</Step>
</Steps>

</Collapser>

<Collapser 
    id="eu-account-users" 
    title="EU account users"
  >

Are you reporting data to the New Relic EU region? Click [here](#EU-account-users) for more instructions. If you're using an EU account, you should also set your `EVENT_CLIENT_HOST`:

```bash
export EVENT_CLIENT_HOST="insights-collector.eu01.nr-data.net"
```

```python
import os
os.environ["EVENT_CLIENT_HOST"] = "insights-collector.eu01.nr-data.net"
```

`EVENT_CLIENT_HOST` can also be sent as a parameter at the `monitor.initialization()` call.

</Collapser>

<Collapser 
    id="demonstration-video" 
    title="Demonstration video"
  >

Here's a demonstration of setting up this integration: 

<Video
  type="wistia"
  id="dz28h83owk"
/>
</Collapser>
</CollapserGroup>
