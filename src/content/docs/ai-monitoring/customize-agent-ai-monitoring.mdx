---
title: 'Customize the agent for AI monitoring'
metaDescription: 'You can apply certain configurations to your APM agents to change how your AI data appears in New Relic.'
freshnessValidatedDate: never
---

Once you [install AI monitoring](/install/ai-monitoring), you can configure the default behavior of the agent or update your app to collect different kinds of data. 

## Configure the agent [#configure-agents]

Update default agent behavior for AI monitoring at these agent configuration docs: 

<CollapserGroup>
    <Collapser
        id="go-config"
        title="Go configurations"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="nodejs-config"
        title="Node.js configurations"
    >
        * [`ai_monitoring.enabled`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#ai-monitoring-enabled)
        * [`ai_monitoring.streaming.enabled`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#ai-monitoring-streaming)
        * [`ai_monitoring.record_content.enabled`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#ai-monitoring-record-content)
        * [`custom_insights_events.max_samples_stored`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#custom_events_max_samples_stored)
        * [`span_events.max_samples_stored`](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#span-events-max-samples-stored)  
    </Collapser>
    <Collapser
        id="python-config"
        title="Python configurations"
    >
        * [`ai_monitoring.enabled`]()
        * [`ai_monitoring.streaming.enabled`]()
        * [`ai_monitoring.record_content.enabled`]()
        * [`event_harvest_config.harvest_limits.span_event_data`](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#harvest-limits-span-event-data)
        * [`event_harvest_config.harvest_limits.custom_event_data`](/docs/apm/agents/python-agent/configuration/python-agent-configuration/#harvest-limits-custom-event-data) 
    </Collapser>
    <Collapser
        id="ruby-config"
        title="Ruby configurations"
    >
    * [`ai_monitoring.enabled`]()
    * [`ai_monitoring.streaming.enabled`]()
    * [`ai_monitoring.record_content.enabled`]()
    * [`span_events.max_samples_stored`](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#custom_insights_events-max_samples_stored)
    * [`custom_insights_events.max_samples_stored`](/docs/apm/agents/ruby-agent/configuration/ruby-agent-configuration/#span_events-max_samples_stored)
    </Collapser>
</CollapserGroup>


## Token count API [#enable-token]

<Callout variant="tip">
If you haven't disabled `ai_monitoring.record_content.enabled`, you don't need to implement the token count callback API.
</Callout>

Disabling `ai_monitoring.record_content.enabled` stops the agent from sending AI content to New Relic, but it also prevents the agent from forwarding token counts for interactions with your app. You can implement a callback in your app code to determine the token counts locally, then have that information forwarded to New Relic.

Refer to the docs below for examples to set up counting tokens locally:

<table>
    <thead>
        <tr>
            <th>
                Agent
            </th>
            <th>
                Methods
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                Go
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Node.js
            </td>
            <td>
                [Token]()
            </td>
        </tr>
        <tr>
            <td>
                Python
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Ruby
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
    </tbody>
</table>

## User feedback API [#enable-feedback]

If your app gives end users the ability to rate an AI response, you can forward this data into the AI monitoring response table. To do this, you'll update your app code to correlate trace IDs from AI event data with the feedback an end user submitted. There are two methods you need to implement to forward this kind of information.

<table>
    <thead>
        <tr>
            <th>
                Agent
            </th>
            <th>
                Methods
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                Go
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Node.js
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Python
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Ruby
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
    </tbody>
</table>