---
title: 'Customize the agent for AI monitoring'
metaDescription: 'You can apply certain configurations to your APM agents to change how your AI data appears in New Relic.'
freshnessValidatedDate: never
---

Once you [install AI monitoring](/install/ai-monitoring), you can configure the default behavior of the agent or update your app to collect different kinds of data. 

## Configure the agent [#configure-agents]

Update default agent behavior for AI monitoring at these agent configuration docs: 

<table>
    <thead>
        <tr>
            <th>
                Agent
            </th>
            <th>
                Configurations
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                Go
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Node.js
            </td>
            <td>
                *
                *
                *
                *
                *
            </td>
        </tr>
        <tr>
            <td>
                Python
            </td>
            <td>
                *
                *
                *
                *
                *
            </td>
        </tr>
        <tr>
            <td>
                Ruby
            </td>
            <td>
                *
                *
                *
                *
                *
            </td>
        </tr>
    </tbody>
</table>

## Token count API [#enable-token]

<Callout variant="tip">
If you haven't disabled `ai_monitoring.record_content.enabled`, you don't need to implement the token count callback API.
</Callout>

Disabling `ai_monitoring.record_content.enabled` stops the agent from sending AI content to New Relic, but it also prevents the agent from forwarding token counts for interactions with your app. You can implement a callback in your app code to determine the token counts locally, then have that information forwarded to New Relic.

Refer to the docs below for examples to set up counting tokens locally:

<table>
    <thead>
        <tr>
            <th>
                Agent
            </th>
            <th>
                Configurations
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                Go
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Node.js
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Python
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Ruby
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
    </tbody>
</table>

Keep in mind that: 

  * It's your responsibility to pick an appropriate tokenizer for your supported models and app languages.
  * The below snippets are examples for how you might use an LLM token count callback. That said, we do not provide support for setting up the token count API.

## User feedback API [#enable-feedback]

AI monitoring can correlate trace IDs between a generated message from your AI and the feedback an end user submitted. When you update your code to correlate messages with feedback, you need to take the trace ID and pass it to the feedback call, as these two events occur at two different endpoints.

To pass the trace ID when recording a feedback event, refer to the below code samples for supported languages:

<table>
    <thead>
        <tr>
            <th>
                Agent
            </th>
            <th>
                Configurations
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                Go
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Node.js
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Python
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
        <tr>
            <td>
                Ruby
            </td>
            <td>
                INSERT_CELL_CONTENT
            </td>
        </tr>
    </tbody>
</table>