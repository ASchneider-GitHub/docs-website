---
title: 'NrqlQuery'
metaDescription: 'Learn how to work the NrqlQuery component'
freshnessValidatedDate: 2024-06-03
---
## NrqlQuery

Fetch data to CDS via a NRQL query.

The component can return data in a format compatible with the Chart component.

### Usage

```
import { NrqlQuery } from 'nr1'
```



### Examples

#### Transform data

```
<NrqlQuery
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    if (data) {
      // change colors to a nice pink.
      data.forEach(({ metadata }) => (metadata.color = '#F00BA5'));
    }


    return <LineChart data={data} />;
  }}
</NrqlQuery>
```



#### Polling data

```
<NrqlQuery
  pollInterval={2000}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```



#### Auto polling

```
<NrqlQuery
  pollInterval={NrqlQuery.AUTO_POLL_INTERVAL}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```



### Props

|                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ----------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `accountId` <h5>DEPRECATED</h5> <h5>number</h5>   | <Callout variant="caution" title={Due November 1st, 2022} > The "accountId" prop is deprecated, use "accountIds" prop instead. </Callout>Identifier of the account to execute the NRQL query against.                                                                                                                                                                                                                                          |
| `accountIds` <h5>REQUIRED</h5> <h5>number</h5>\[] | Identifiers of accounts to execute the NRQL query against.                                                                                                                                                                                                                                                                                                                                                                                                |
| `children` <h5>function</h5>                  | Render prop function as a child.<FunctionDefinition returnValue={[{"type":"React.ReactNode","description":""}]} arguments={[{"name":"queryResult","type":"QueryResult","description":"Results of the\\n query."}]} />                                                                                                                                                                                                            |
| `formatType` <h5>enum</h5>                    | Format of the response.<OptionReference>NrqlQuery.FORMAT_TYPE.CHARTNrqlQuery.FORMAT_TYPE.RAW>                                                                                                                                                                                                                                                                                                                                 |
| `offset` <h5>number</h5>                      | Offset to apply to the computed begin_time and end_time, in epoch milliseconds. This offset is only applied when the query is open ended, that is:1. end_time is not specified, and 2. duration is specified.If these conditions are met and an offset value is present, the effective end_time will be set to offset milliseconds ending now, while the effective begin_time will be set to (offset + duration) milliseconds before that end_time.       |
| `pollInterval` <h5>number|enum</h5>          | Interval in millisecond to poll for new data or automatically set based on response data's metadata.                                                                                                                                                                                                                                                                                                                                                      |
| `query` <h5>REQUIRED</h5><h5>string</h5>         | NRQL query.See \[NRQL documentation for reference]INSERTLINKhttps://docs.newrelic.com/docs/insights/nrql-new-relic-query-language/nrql-reference.                                                                                                                                                                                                                                                                                                    |
| `skip` <h5>boolean</h5>                       | When set to `true`, the query will be skipped entirely from rendering.                                                                                                                                                                                                                                                                                                                                                                                    |
| `timeRange`##<h3>shape</h3>                    | Time range to scope NRQL query time range. When only duration is provided it uses duration to query from NOW back until DURATION (aka Open ended query). When begin_time and end_time are provided it uses them to query SINCE begin_time UNTIL end_time (aka Closed query).<h3>shape</h3>|                          |   | | ------------------------ | - | | `begin_time` <h5>number</h5> |   | | `duration` <h5>number</h5>   |   | | `end_time` <h5>number</h5>   |   | |

### Methods

### `NrqlQuery.query`

<FunctionDefinition arguments={[{"description":"Object containing the query options. Any\\n \`NrqlQuery\` prop is a valid option except \`children\` and\\n \`pollInterval\`.","name":"props","type":"Object"}]} returnValue={{"description":"","type":"PromiseQueryResult"}} />

### Type definitions

<TypeDefReference typeDef={{"name":"PromiseQueryResult","properties":\[{"description":"Runtime error with \`graphQLErrors\`\\n and \`networkError\` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not \`null\`, \`fetchMore\` allows you to\\n load more results for your query. New data is merged with previous\\n data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}} /><TypeDefReference typeDef={{"name":"QueryResult","properties":\[{"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},{"description":"Runtime error with \`graphQLErrors\`\\n and \`networkError\` properties.","name":"error","type":"ApolloClient.ApolloError"},{"description":"Object containing the result of your query.","name":"data","type":"Object"},{"description":"If not \`null\`, \`fetchMore\` allows you to\\n load more results for your query. New data is merged with previous\\n data.","name":"fetchMore","type":"function|null"},{"description":"Refetch the query.","name":"refetch","type":"function"}]}} />