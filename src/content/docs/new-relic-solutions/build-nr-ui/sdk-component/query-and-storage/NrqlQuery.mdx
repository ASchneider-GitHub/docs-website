---
title: 'NrqlQuery'
metaDescription: 'Learn how to work the NrqlQuery component'
freshnessValidatedDate: 2024-06-03
---
## NrqlQuery

Fetch data to CDS via a NRQL query.

The component can return data in a format compatible with the Chart component.

### Usage

```
import { NrqlQuery } from 'nr1'
```



### Examples

#### Transform data

```
<NrqlQuery
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    if (data) {
      // change colors to a nice pink.
      data.forEach(({ metadata }) => (metadata.color = '#F00BA5'));
    }


    return <LineChart data={data} />;
  }}
</NrqlQuery>
```



#### Polling data

```
<NrqlQuery
  pollInterval={2000}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```



#### Auto polling

```
<NrqlQuery
  pollInterval={NrqlQuery.AUTO_POLL_INTERVAL}
  accountIds={[1]}
  query="SELECT count(*) FROM `Synthetics` SINCE 1 DAY AGO TIMESERIES AUTO FACET jobType"
>
  {({ data }) => {
    return <LineChart data={data} />;
  }}
</NrqlQuery>
```



### Props

|                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ----------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `accountId`##### DEPRECATED##### number   | &lt;Callout variant="caution" title=&#x7B;Due November 1st, 2022} > The "accountId" prop is deprecated, use "accountIds" prop instead. &lt;/Callout>Identifier of the account to execute the NRQL query against.                                                                                                                                                                                                                                          |
| `accountIds`##### REQUIRED##### number\[] | Identifiers of accounts to execute the NRQL query against.                                                                                                                                                                                                                                                                                                                                                                                                |
| `children`##### function                  | Render prop function as a child.&lt;FunctionDefinition returnValue=&#x7B;\[&#x7B;"type":"React.ReactNode","description":""}]} arguments=&#x7B;\[&#x7B;"name":"queryResult","type":"QueryResult","description":"Results of the\\n query."}]} />                                                                                                                                                                                                            |
| `formatType`##### enum                    | Format of the response.##### REPLACE WITH CUSTOM COMPONENT&lt;One ofNrqlQuery.FORMAT_TYPE.CHARTNrqlQuery.FORMAT_TYPE.RAW>                                                                                                                                                                                                                                                                                                                                 |
| `offset`##### number                      | Offset to apply to the computed begin_time and end_time, in epoch milliseconds. This offset is only applied when the query is open ended, that is:1. end_time is not specified, and 2. duration is specified.If these conditions are met and an offset value is present, the effective end_time will be set to offset milliseconds ending now, while the effective begin_time will be set to (offset + duration) milliseconds before that end_time.       |
| `pollInterval`##### number\|enum          | Interval in millisecond to poll for new data or automatically set based on response data's metadata.                                                                                                                                                                                                                                                                                                                                                      |
| `query`##### REQUIRED##### string         | NRQL query.See \[NRQL documentation for reference]INSERTLINKhttps&#x3A;//docs.newrelic.com/docs/insights/nrql-new-relic-query-language/nrql-reference.                                                                                                                                                                                                                                                                                                    |
| `skip`##### boolean                       | When set to `true`, the query will be skipped entirely from rendering.                                                                                                                                                                                                                                                                                                                                                                                    |
| `timeRange`##### shape                    | Time range to scope NRQL query time range. When only duration is provided it uses duration to query from NOW back until DURATION (aka Open ended query). When begin_time and end_time are provided it uses them to query SINCE begin_time UNTIL end_time (aka Closed query).### shape|                          |   | | ------------------------ | - | | `begin_time`##### number |   | | `duration`##### number   |   | | `end_time`##### number   |   | |

### Methods

### `NrqlQuery.query`

&lt;FunctionDefinition arguments=&#x7B;\[&#x7B;"description":"Object containing the query options. Any\\n \`NrqlQuery\` prop is a valid option except \`children\` and\\n \`pollInterval\`.","name":"props","type":"Object"}]} returnValue=&#x7B;&#x7B;"description":"","type":"PromiseQueryResult"}} />

### Type definitions

&lt;TypeDefReference typeDef=&#x7B;&#x7B;"name":"PromiseQueryResult","properties":\[&#x7B;"description":"Runtime error with \`graphQLErrors\`\\n and \`networkError\` properties.","name":"error","type":"ApolloClient.ApolloError"},&#x7B;"description":"Object containing the result of your query.","name":"data","type":"Object"},&#x7B;"description":"If not \`null\`, \`fetchMore\` allows you to\\n load more results for your query. New data is merged with previous\\n data.","name":"fetchMore","type":"function|null"},&#x7B;"description":"Refetch the query.","name":"refetch","type":"function"}]}} />&lt;TypeDefReference typeDef=&#x7B;&#x7B;"name":"QueryResult","properties":\[&#x7B;"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},&#x7B;"description":"Runtime error with \`graphQLErrors\`\\n and \`networkError\` properties.","name":"error","type":"ApolloClient.ApolloError"},&#x7B;"description":"Object containing the result of your query.","name":"data","type":"Object"},&#x7B;"description":"If not \`null\`, \`fetchMore\` allows you to\\n load more results for your query. New data is merged with previous\\n data.","name":"fetchMore","type":"function|null"},&#x7B;"description":"Refetch the query.","name":"refetch","type":"function"}]}} />