---
title: 'EntitiesByDomainTypeQuery'
metaDescription: 'Learn how to work the EntitiesByDomainTypeQuery component'
freshnessValidatedDate: 2024-06-03
---
## EntitiesByDomainTypeQuery

Query entities by entityDomain and entityType.

### Usage

```
import { EntitiesByDomainTypeQuery } from 'nr1'
```



### Examples

#### Declarative query

```
<EntitiesByDomainTypeQuery entityDomain="APM" entityType="APPLICATION">
  {({ error, data, fetchMore }) => {
    if (error) {
      return 'Error!';
    }


    return (
      <List
        items={data.entities}
        rowCount={data.count}
        rowHeight={20}
        onLoadMore={fetchMore}
      >
        {({ item }) => <ListItem key={item.guid}>{item.name}</ListItem>}
      </List>
    );
  }}
</EntitiesByDomainTypeQuery>
```



#### Fetch with sorting criteria

```
<EntitiesByDomainTypeQuery
  entityDomain="INFRA"
  entityType="HOST"
  sortBy={[EntitiesByDomainTypeQuery.SORT_TYPE.ALERT_SEVERITY]}
>
  {({ data, error, fetchMore }) => {
    if (error) {
      return 'Error!';
    }


    return (
      <List
        items={data.entities}
        rowCount={data.count}
        rowHeight={20}
        onLoadMore={fetchMore}
      >
        {({ item }) => <ListItem key={item.guid}>{item.name}</ListItem>}
      </List>
    );
  }}
</EntitiesByDomainTypeQuery>
```



#### Imperative query

```
EntitiesByDomainTypeQuery.query({
  entityDomain: 'APM',
  entityType: 'APPLICATION',
}).then(({ data }) => console.log(data));
```



#### Fetch more results using imperative query

```
const firstPage = await EntitiesByDomainTypeQuery.query({
  entityDomain: 'APM',
  entityType: 'APPLICATION',
});


console.log('First page data', firstPage.data);


const cursor = firstPage.data.nextCursor;
const secondPage = await EntitiesByDomainTypeQuery.query({
  cursor,
  entityDomain: 'APM',
  entityType: 'APPLICATION',
});


console.log('Second page data', secondPage.data);


// NOTE: To fetch multiple page results consecutively,
// use EntitiesByDomainTypeQuery component's fetchMore approach.
```



### Props

|                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `children`##### function                        | Render prop function as a child.&lt;FunctionDefinition returnValue=&#x7B;\[&#x7B;"type":"React.ReactNode","description":""}]} arguments=&#x7B;\[&#x7B;"name":"queryResult","type":"QueryResult","description":"Results of the query."}]} />                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `entityDomain`##### REQUIRED##### string        | Domain of the entities you want to query.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `entityFragmentExtension`##### object           | GraphQL fragment document parsed into an AST by `graphql-tag`.The Query components return the most commonly used fields available on an entity. You can use this prop when you want to request additional fields for the entities returned by your query.The fragment should be named `EntityFragmentExtension` and apply to the `EntityOutline` type.``` const entityFragmentExtension = ngql`   fragment EntityFragmentExtension on EntityOutline {     indexedAt     guid   } `; ```                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `entityType`##### REQUIRED##### string          | Type of the entities you want to query.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `fetchPolicyType`##### enum                     | Allows you to specify how you want your query to interact with the cached data.* `CACHE_AND_NETWORK`: The query returns your initial data from the cache if available. However, regardless of whether or not the full data is in your cache, the query always makes a request using your network interface and returns the updated data. This option is not available when using the static `query()` method of the component. * `CACHE_FIRST`: The query makes a request using your network interface **only** if the data for your query is not already in the cache. * `CACHE_ONLY`: The query **never** makes a request using your network interface. Instead it returns the data available in the cache. If the data for your query does not exist in the cache, then an error is thrown. * `NETWORK_ONLY`: The query **never** returns your initial data from the cache. Instead it **always** makes a request using your network interface. * `NO_CACHE`: The query **never** returns your initial data from the cache. Instead it **always** makes a request using your network interface. Unlike the `NETWORK_ONLY` policy, it does not write any data to the cache after the query completes.##### REPLACE WITH CUSTOM COMPONENT&lt;One ofEntitiesByDomainTypeQuery.FETCH_POLICY_TYPE.CACHE_AND_NETWORKEntitiesByDomainTypeQuery.FETCH_POLICY_TYPE.CACHE_FIRSTEntitiesByDomainTypeQuery.FETCH_POLICY_TYPE.CACHE_ONLYEntitiesByDomainTypeQuery.FETCH_POLICY_TYPE.NETWORK_ONLYEntitiesByDomainTypeQuery.FETCH_POLICY_TYPE.NO_CACHE> |
| `filters`##### string\|(shape\|shape\|shape)\[] | Filters used to narrow down the entities.This is an array of filters, and there are 3 possible filters:* SearchQueryFilter: `Object<type: string = "searchQuery", value: string>` * EntityTypeFilter: `Object<type: string = "entityType", Object<domain: string, type: string>>` * TagFilter: `Object<type: string = "tag", Object<key: string, value: string>>```` const filters = [   {     type: 'searchQuery',     value: 'foo',   },   {     type: 'entityType',     value: { domain: 'APM', type: 'APPLICATION' },   },   {     type: 'tag',     value: { key: 'environment', value: 'production' },   },   {     type: 'tag',     value: { key: 'team', value: 'bar' },   }, ]; ```                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `includeSummaryMetrics`##### boolean            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `includeTags`##### boolean                      | If `true`, the returned entities include their tags.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `limit`##### number                             | Pagination, number of entities to fetch for on each page.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `pollInterval`##### number                      | Interval in milliseconds to poll for new data. Set to zero to avoid any kind of regular polling.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `skip`##### boolean                             | When set to `true`, the query will be skipped entirely from rendering.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `sortBy`##### enum\[]                           | Array of criteras used to sort the entity search results.##### REPLACE WITH CUSTOM COMPONENT&lt;Array of##### REPLACE WITH CUSTOM COMPONENT&lt;One ofEntitiesByDomainTypeQuery.SORT_TYPE.ALERT_SEVERITYEntitiesByDomainTypeQuery.SORT_TYPE.DOMAINEntitiesByDomainTypeQuery.SORT_TYPE.MOST_RELEVANTEntitiesByDomainTypeQuery.SORT_TYPE.NAMEEntitiesByDomainTypeQuery.SORT_TYPE.REPORTINGEntitiesByDomainTypeQuery.SORT_TYPE.TYPE>>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

### Methods

### `EntitiesByDomainTypeQuery.query`

&lt;FunctionDefinition arguments=&#x7B;\[&#x7B;"description":"Object containing the query options. Any\\n \`EntitiesByDomainTypeQuery\` prop is a valid option except\\n \`children\` and \`pollInterval\`.","name":"props","type":"Object"}]} returnValue=&#x7B;&#x7B;"description":"","type":"PromiseQueryResult"}} />

### Type definitions

&lt;TypeDefReference typeDef=&#x7B;&#x7B;"name":"PromiseQueryResult","properties":\[&#x7B;"description":"Runtime error with \`graphQLErrors\`\\n and \`networkError\` properties.","name":"error","type":"ApolloClient.ApolloError"},&#x7B;"description":"Object containing the result of your query.","name":"data","type":"Object"},&#x7B;"description":"If not \`null\`, \`fetchMore\` allows you to\\n load more results for your query. New data is merged with previous\\n data.","name":"fetchMore","type":"function|null"},&#x7B;"description":"Refetch the query.","name":"refetch","type":"function"}]}} />&lt;TypeDefReference typeDef=&#x7B;&#x7B;"name":"QueryResult","properties":\[&#x7B;"description":"Indicates that the request is in flight.","name":"loading","type":"boolean"},&#x7B;"description":"Runtime error with \`graphQLErrors\`\\n and \`networkError\` properties.","name":"error","type":"ApolloClient.ApolloError"},&#x7B;"description":"Object containing the result of your query.","name":"data","type":"Object"},&#x7B;"description":"If not \`null\`, \`fetchMore\` allows you to\\n load more results for your query. New data is merged with previous\\n data.","name":"fetchMore","type":"function|null"},&#x7B;"description":"Refetch the query.","name":"refetch","type":"function"}]}} />