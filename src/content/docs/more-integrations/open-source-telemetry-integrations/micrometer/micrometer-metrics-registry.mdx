---
title: Forward Micrometer data to New Relic with OpenTelemetry
metaDescription: New Relic offers an integration that sends your Micrometer telemetry data to your New Relic account.
redirects:
    - /docs/integrations/open-source-telemetry-integrations/micrometer/micrometer-metrics-registry
    - /docs/integrations/open-source-telemetry-integrations/open-source-telemetry-integration-list/new-relics-micrometer-integration
freshnessValidatedDate: never
---

import opentelemetryMicrometerWithOtel from 'images/opentelemetry_screenshot-full_micrometer-with-otel.webp'

[Micrometer](https://micrometer.io/) provides a simple facade over instrumentation clients, letting you instrument your JVM-based application code without vendor lock-in. You can configure the [OpenTelemetry Micrometer Bridge](https://github.com/open-telemetry/opentelemetry-java-instrumentation/tree/main/instrumentation/micrometer/micrometer-1.5/library) along with the OpenTelemetry SDK to forward Micrometer data to New Relic via OTLP.

This doc walks you through procedures to forward Micrometer data with an example Spring app. These are generalized steps that you may want to update to fit your specific environment. 

<img
    title="Micrometer bridged with OpenTelemetry in New Relic"
    alt="A screenshot of the Micrometer summary page when instrumented with OpenTelemetry"
    src={opentelemetryMicrometerWithOtel}
/>

<figcaption>
Go to **[one.newrelic.com](https://one.newrelic.com) > All Capabilities > APM & Services**, then find the **Services - OpenTelemetry** section: View your Micrometer data in New Relic when bridged through OpenTelemetry
</figcaption>

## Compatibility and requirements [#requirements]

Before working through these procedures, you should:

* Configure the OpenTelemetry Metrics SDK to export data to New Relic via [OpenTelemetry Protocol (OTLP)](/docs/more-integrations/open-source-telemetry-integrations/opentelemetry/opentelemetry-introduction/#how-it-works)
* Install the OpenTelemetry Micrometer bridge

## Forward Micrometer data to New Relic [#forward-data-OpenTelemetry]

<Steps>
    <Step>

### Add OpenTelemetry Micrometer instrumentation

Add OpenTelemetry Micrometer instrumentation to the alpha modules section of your `build.gradle` file:

    ```java
    //Alpha modules
    implementation 'io.opentelemetry.instrumentation:opentelemetry-micrometer-1.5'
    ```

    </Step>
    <Step>

### Add OpenTelemetry API and SDK dependencies
        
In the `dependencies` section, add the OpenTelemetry SDK and OTLP exporter:

    ```java
    dependencies {
        implementation 'io.opentelemetry:opentelemetry-sdk'
        implementation 'io.opentelemetry:opentelemetry-exporters-otlp'
    }
    ```
    

An example completed file might look something like this:

```java
plugins {
    id 'java-library'
    id 'org.springframework.boot'
}

bootRun {
    mainClass.set 'io.opentelemetry.example.micrometer.Application'
}

dependencies {
    //OpenTelemetry API and SDK
    implementation 'io.opentelemetry:opentelemetry-sdk'
    //Alpha modules where Micrometer instrumentation appears
    implementation 'io.opentelemetry.instrumentation:opentelemetry-micrometer-1.5'
    implementation 'io.opentelemetry:opentelemetry-exporter-otlp'

    implementation platform(SpringBootPlugin.BOM_COORDINATES)
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'org.springframework.boot:spring-boot-starter-aop'
}
```

    </Step>
    <Step>

### Configure Micrometer to forward data to New Relic

Below is an example code snippet that directs Micrometer to use the OpenTelemetry Micrometer bridge. This snippet updates your code so OpenTelemetry can:

* Detect Micrometer data
* Forward that data to New Relic

```java
public OpenTelemetry openTelemetry() {
    return OpenTelemetrySdk.builder()
        .setMeterProvider(
            SdkMeterProvider.builder()
                .setResource(
                    Resource.getDefault().toBuilder()
                        .put("service.name", "micrometer-shim")
                        // Include instrumentation.provider=micrometer to enable micrometer metrics
                        // experience in New Relic
                        .put("instrumentation.provider", "micrometer")
                        .build())
                .registerMetricReader(
                    PeriodicMetricReader.builder(
                            OtlpHttpMetricExporter.builder()
                                .setEndpoint("https://otlp.nr-data.net")
                                .addHeader(
                                    "api-key",
                                    Optional.ofNullable(System.getenv("NEW_RELIC_LICENSE_KEY"))
                                        .filter(str -> !str.isEmpty() && !str.isBlank())
                                        .orElseThrow())
                                // IMPORTANT: New Relic requires metrics to be delta temporality
                                .setAggregationTemporalitySelector(
                                    AggregationTemporalitySelector.deltaPreferred())
                                // Use exponential histogram aggregation for histogram instruments
                                // to
                                // produce better data and compression
                                .setDefaultAggregationSelector(
                                    DefaultAggregationSelector.getDefault()
                                        .with(
                                            InstrumentType.HISTOGRAM,
                                            Aggregation.base2ExponentialBucketHistogram()))
                                .build())
                        // Match default micrometer collection interval of 60 seconds
                        .setInterval(Duration.ofSeconds(60))
                        .build())
                .build())
        .build();
    }
```
    
        
    </Step>

        <Step>

### Find your data in New Relic 

Wait a few minutes, trigger some test data, then go to **[one.newrelic.com](https://one.newrelic.com) > All Capabilities > APM & Services**, then find **Services - OpenTelemetry** to choose the service instrumented with Micrometer.

    </Step>
    
</Steps>

## What's next? [#whats-next]

To learn more about using New Relic with Micrometer data, we recommend checking out:

* How to explore your data with 
* Core APM, My app is slow 
* Query
* Alerts