---
title: 'OpenTelemetry traces in New Relic'
tags:
  - Integrations
  - Open source telemetry integrations
  - OpenTelemetry
metaDescription: Details on how New Relic works with OpenTelemetry traces
freshnessValidatedDate: never
---

OpenTelemetry provides a rich tracing ecosystem, with an [API](https://opentelemetry.io/docs/specs/otel/trace/api/) for recording trace telemetry, an [SDK](https://opentelemetry.io/docs/specs/otel/trace/sdk/) for exporting span data, and [context propagation](https://opentelemetry.io/docs/specs/otel/context/api-propagators/) for tracing across application boundaries.

This page describes how New Relic handles OpenTelemetry spans it receives via the [New Relic OTLP Endpoint](/docs/more-integrations/open-source-telemetry-integrations/opentelemetry/best-practices/opentelemetry-otlp). Integrating OpenTelemetry traces with New Relic requires configuring the trace source to export to this endpoint - please review endpoint configuration requirements. For information on configuring services with OpenTelemetry traces see [OpenTelemetry APM monitoring](/docs/more-integrations/open-source-telemetry-integrations/opentelemetry/get-started/opentelemetry-set-up-your-app).

## OTLP Span Mapping [#otlp-mapping]

New Relic maps OTLP spans to the `Span` data type. The table below describes how fields from the [Span proto message](https://github.com/open-telemetry/opentelemetry-proto/blob/main/opentelemetry/proto/trace/v1/trace.proto) are interpreted:

| OTLP Span Proto Field                        | New Relic `Span` field                                                                                                            |
|----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| `ResourceSpans.Resource.attributes`          | Each key/value is an attribute on the `Span` **[1]**                                                                              |
| `ScopeSpans.InstrumentationScope.name `      | `otel.library.name`                                                                                                               |
| `ScopeSpans.InstrumentationScope.version`    | `otel.library.version`                                                                                                            |
| `ScopeSpans.InstrumentationScope.attributes` | Each key/value is an attribute on the `Span` **[1]**                                                                              |
| `Span.trace_id`                              | `trace.id`                                                                                                                        |
| `Span.span_id`                               | `id`                                                                                                                              |
| `Span.trace_state`                           | `w3c.tracestate`                                                                                                                  |
| `Span.parent_span_id`                        | `parent.id`                                                                                                                       |
| `Span.name`                                  | `name`                                                                                                                            |
| `Span.kind`                                  | `span.kind`                                                                                                                       |
| `Span.start_time_unix_nano`                  | `timestamp`                                                                                                                       |
| `Span.end_time_unix_nano`                    | `druation.ms` (computed with `Span.start_time_unix_nano`                                                                          |
| `Span.attributes`                            | Each key/value is an attribute on the `Span` **[1]**                                                                              |
| `Span.dropped_attribute_count`               | `otel.dropped_attributes_count`                                                                                                   |
| `Span.events`                                | Each event is recorded as a `SpanEvent` with `span.id` / `trace.id` referring to source span, count stored as `nr.spanEventCount` |
| `Span.events[*].time_unix_nano`              | Stored as `timestamp` on `SpanEvent`                                                                                              |
| `Span.events[*].name`                        | Stored as `name` on `SpanEvent`                                                                                                   |
| `Span.events[*].attributes`                  | Each key/value is stored as an attribute on `SpanEvent`                                                                           |
| `Span.events[*].dropped_attributes_count`    | Stored as `ote.dropped_Attributes_count` on `SpanEvent`                                                                           |
| `Span.dropped_events_count`                  | `otel.dropped_events_count`                                                                                                       |
| `Span.status.message`                        | `otel.status_description`                                                                                                         |
| `Span.status.code`                           | `otel.status_code`                                                                                                                |

**[1]**: In case of conflict in resource attributes, scope attributes, span attributes, and top level span fields, the order of precedent (highest to lowest) is: top level `Span.*` fields > `Span.attributes` > `ScopeSpans.InstrumentationScope.attributes` > `ResourceSpans.Resource.attributes`.

## Span links [#span-links]

OpenTelemetry [span links](https://opentelemetry.io/docs/concepts/signals/traces/#span-links) are not currently supported by New Relic.
