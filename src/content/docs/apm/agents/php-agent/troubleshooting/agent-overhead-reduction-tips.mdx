---
title: PHP Agent overhead reduction tips
type: troubleshooting
tags:
  - Agents
  - PHP agent
  - Troubleshooting
metaDescription: Agent settings to decrease overhead.
freshnessValidatedDate: never
---

## Problem

Using the New Relic PHP agent results in overhead.

## Explanation

Overhead is an expected side effect of monitoring and reporting on software. Our engineers aim to minimize this, but your experience may differ quite a lot, depending on how you're using the agent. If you find that you are experiencing unexpected overhead, there are are various settings in the INI that can help reduce it.

## INI Settings
Performance settings that can reduce overhead depending on your agent usage.

1. reduce [newrelic.span_events.max_samples_stored](https://docs.newrelic.com/docs/apm/agents/php-agent/configuration/php-agent-configuration/#inivar-span-events-max-samples-stored)

2. disable [code level metrics](https://docs.newrelic.com/docs/apm/agents/php-agent/configuration/php-agent-configuration/#inivar-code-level-metrics-enabled) 

3. disable [logging](https://docs.newrelic.com/docs/apm/agents/php-agent/configuration/php-agent-configuration/#log-forwarding)

4. set [newrelic.transaction_tracer.max_segments_web](https://docs.newrelic.com/docs/apm/agents/php-agent/configuration/php-agent-configuration/#inivar-tt-maxsegweb) and/or [newrelic.transaction_tracer.max_segments_cli](https://docs.newrelic.com/docs/apm/agents/php-agent/configuration/php-agent-configuration/#inivar-tt-maxsegcli) >= 1

5. set [newrelic.transaction_tracer.detail](https://docs.newrelic.com/docs/apm/agents/php-agent/configuration/php-agent-configuration/#inivar-tt-detail) = 0

6. [newrelic.transaction_tracer.enabled](https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-enabled) = false

7. increase the [transaction tracer threshold](https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-threshold) by setting newrelic.transaction_tracer.threshold = higher value

8. [newrelic.transaction_tracer.explain_enabled](https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-explain-enabled) = false

9. don't trace slow SQL statements by setting [newrelic.transaction_tracer.slow_sql](https://docs.newrelic.com/docs/agents/php-agent/configuration/php-agent-configuration#inivar-tt-slowsql) = false


## Other overhead considerations
A non-performant clocksource can affect the agent which checks the time for every span.  Please ensure you are using an appropriate [clocksource](https://forum.newrelic.com/s/hubtopic/aAX8W0000008a7rWAA/relic-solution-php-agent-cpu-overhead-tips).
Fargate is affected by clocksource and is known to cause additional [overhead](https://docs.newrelic.com/docs/apm/agents/php-agent/troubleshooting/fargate-nitro-clock-performance-impact/).
