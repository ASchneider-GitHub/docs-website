---
title: Approaches to .NET serverless AWS Lambda performance monitoring
tags:
  - Agents
  - NET agent
  - Getting started
metaDescription: 'This guide helps users decide which approach to take for .NET serverless AWS Lambda performance monitoring.'
freshnessValidatedDate: never
---

Unified visibility into the most detailed behaviors of your .NET Lambda functions is essential so you can understand what's going on in your serverless applications. This information enables you to troubleshoot and optimize your functions so they can work faster and deliver with confidence. Modern approaches to instrumenting and monitoring your .NET Lambda functions make this possible. The two primary approaches to this are using the [New Relic .NET Agent](/docs/apm/agents/net-agent/getting-started/introduction-new-relic-net/) and the [AWS Distro for OpenTelemetry](https://aws-otel.github.io/docs/getting-started/lambda/lambda-dotnet). In this article, we discuss these approaches to .NET Lambda performance monitoring in more detail.

## Summary
To help you decide which of these approaches would be suit your environment, the following table outlines the different requirements and capabilities of each.

| | New Relic .NET Agent | AWS Distro for OpenTelemetry |
| -------- | -------- | ------- |
| Requires code changes | No | Yes |
| Needs tool for sending data | Yes | No |
| New Relic UI experience | [Serverless](/docs/serverless-function-monitoring/aws-lambda-monitoring/ui-data/understand-lambda-monitoring-ui/) | [OpenTelemetry](https://docs.newrelic.com/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui/) |
| Distributed Tracing | Yes | [Partial](/docs/serverless-function-monitoring/aws-lambda-monitoring/opentelemetry/lambda-opentelemetry-dotnet/#distributed-tracing) |
| Metrics | No | Yes |
| Transaction Traces | Yes | N/A |
| Transaction Events | Yes | [Partial](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui/#transactions-page) |
| Error Events/Spans | Yes | Yes |
| Span Events or Spans | Yes | Yes |
| SQL Traces | Yes | N/A |
| Thread Profiling | No | N/A |
| Vulnerability Management | No | N/A |
| External calls | Yes | [Partial](/docs/opentelemetry/get-started/apm-monitoring/opentelemetry-apm-ui/#externals-page) |
| Custom instrumentation using XML | No | No |
| Custom instrumentation using API | Yes (Agent) | Yes (OpenTelemetry) |
| Custom metrics | No | Yes |
| Custom events | Yes | N/A |
| Custom spans | Yes | Yes |
| Custom errors | Yes | No |
| Custom attributes | Yes | Yes |
| Logs | Yes* | Yes |
| Legacy Cross application tracing | No | No |

* Logs-in-context will be captured by the Lambda Extension or CloudWatch, not by in-agent log forwarding.

## New Relic .NET agent
Starting in agent version 10.26.0, the New Relic .NET agent supports instrumenting AWS Lambda functions. In most cases, the .NET Agent will automatically instrument your AWS Lambda function. The benefit of using the agent is that in most cases, no code changes are required to monitor your lambda function. In a lambda function, the agent will switch into a "serverless mode" that will disable sending data directly to New Relic as well some other features and requirements.  You must either use the New Relic Lambda Extension (included in our .NET agent layer) or CloudWatch to send data to New Relic. 

Since the agent automatically instruments most lambda functions, it is possible to use the [agent Nuget package](https://www.nuget.org/packages/NewRelic.Agent#readme-body-tab) to monitor your lambda functions.  The environment variables will need to be manually configured for your chosen deployment method and this still requires setting up either the New Relic Lambda Extension or CloudWatch integration in order for data to be sent to New Relic.  You can find more information on the required settings in [our installation guide](https://docs.newrelic.com/install/dotnet/?deployment=nuget#nuget-linux).

<Callout variant="important">
    **Serverless Framework Plugin**
    Support for .NET Lambda functions begins in v5.3.0 of the serverless plugin.  If you are running a version of the serverless plugin prior to v5.3.0, upgrading to v5.3.0 or later will automatically instrument your .NET Lambda functions.  You can [use the exclude statement](https://github.com/newrelic/serverless-newrelic-lambda-layers?tab=readme-ov-file#exclude-optional) in your serverless.yml to exclude functions from automatic instrumentation.
</Callout>

## AWS Distro for OpenTelemetry (ADOT) Lambda Support For .NET
The OpenTelemetry Lambda instrumentation for .NET provides extension and tracing APIs you can use to instrument your Lambda function.  ADOT is available as a layer to make it easier to install. The ADOT Lambda layer provides a reduced version of the AWS Distro for OpenTelemetry Collector, which can export OpenTelemetry data to New  Relic.  Instead of the Serverless UI experience, this approach will use the OpenTelemetry UI.

This method requires some initial manual configuration depending on your deployment method.

For installation details, see [here](/docs/serverless-function-monitoring/aws-lambda-monitoring/opentelemetry/lambda-opentelemetry-dotnet/).
