---
title: 'Kubernetes integration: Pre-built alert policies'
tags:
  - Integrations
  - Kubernetes integration
  - Installation
redirects:
  - /docs/integrations/kubernetes-integration/kubernetes-events/kubernetes-integration-predefined-alert-policy
  - /docs/kubernetes-pixie/kubernetes-integration/kubernetes-events/kubernetes-integration-predefined-alert-policy
freshnessValidatedDate: never
---

When deploying the New Relic Kubernetes integration for the first time in an account, we deploy a default set of pre-built alert policies to your account. The pre-defined alert policies doesn't have a [notification channel](/docs/apis/nerdgraph/examples/nerdgraph-api-notifications-channels/) by default to prevent unwanted notifications.

You can customize the thresholds for the alert policies, as well as update the policy to send notifications. For more information, see the [Infrastructure alerts documentation](/docs/infrastructure/new-relic-infrastructure/infrastructure-alert-conditions/infrastructure-alerts-add-edit-or-view-host-alert-information).

## Adding pre-built alert policies [#add-pre-built-alert-policies]

To add pre-built alert policies, follow these steps:

1. Go to <DNT>**[one.newrelic.com](https://one.newrelic.com) > + Integrations & Agents**</DNT>. 

2. Select <DNT>**Alerts**</DNT> to access the pre-built resources. 

3. Search <DNT>**Kubernetes**</DNT> and select the pre-defined alert policy you want to add.

    <img
      title="Add Kubernetes alerts"
      alt="Add Kubernetes alerts"
      src="/images/kubernetes_screenshot-crop_add-alerts.webp"
    />


## Kubernetes alert policy [#k8s-alert-policies]


<CollapserGroup>
    <Collapser
        id="container-cpu-throttling-high"
        title="Container CPU throttling is high"
    >
      This alert condition generates an alert when a container is throttled by more than 25% for more than 5 minutes. It runs this query:

        ```sql
        from K8sContainerSample
        select sum(containerCpuCfsThrottledPeriodsDelta) / sum(containerCpuCfsPeriodsDelta) * 100 
        where clusterName in ('YOUR_CLUSTER_NAME') and namespaceName in ('YOUR_NAMESPACE_NAME') facet containerName, podName, namespaceName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/ContainerCPUThrottling.yaml) for more info.

    </Collapser>

    <Collapser
        id="container-high-cpu-utilization"
        title="Container high CPU utilization"
    >
      This alert condition generates an alert when the average container CPU usage against the limit is greater than 90% for more than 5 minutes. It runs this query:

        ```sql
        from K8sContainerSample
        select average(cpuCoresUtilization)
        where clusterName in ('YOUR_CLUSTER_NAME') and namespaceName in ('YOUR_NAMESPACE_NAME') facet containerName, podName, namespaceName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/ContainerHighCPUUtil.yaml) for more info.

    </Collapser>

    <Collapser
        id="container-high-memory-utilization"
        title="Container high memory utilization"
    >
      This alert condition generates an alert when the average container memory usage against the limit is greater than 90% for more than 5 minutes. It runs this query:

        ```sql
        from K8sContainerSample
        select average(memoryWorkingSetUtilization)
        where clusterName in ('YOUR_CLUSTER_NAME') and namespaceName in ('YOUR_NAMESPACE_NAME') facet containerName, podName, namespaceName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/ContainerHighMemUtil.yaml) for more info.
    </Collapser>

    <Collapser
        id="container-restarting"
        title="Container is restarting"
    >
      This alert condition generates an alert when the container restart count is greater than 0 in a 5-minute sliding window. It runs this query:

        ```sql
        from K8sContainerSample
        select sum(restartCountDelta)
        where clusterName in ('YOUR_CLUSTER_NAME') and namespaceName in ('YOUR_NAMESPACE_NAME') facet containerName, podName, namespaceName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/ContainerRestarting.yaml) for more info.

    </Collapser>
    <Collapser
        id="container-waiting"
        title="Container is waiting"
    >
      This alert condition generates an alert when a container is waiting for more than 5 minutes. It runs this query:

        ```sql
        from K8sContainerSample
        select uniqueCount(podName)
        WHERE status = 'Waiting' and clusterName in ('YOUR_CLUSTER_NAME') and namespaceName in ('YOUR_NAMESPACE_NAME') FACET containerName, podName, namespaceName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/ContainerWaiting.yaml) for more info.
    </Collapser>

    <Collapser
        id="daemonset-missing-pods"
        title="Daemonset is missing pods"
    >
      This alert condition generates an alert when the daemonset is missing pods for more than 5 minutes. It runs this query:

        ```sql
        from K8sDaemonsetSample
        select latest(podsMissing)
        WHERE clusterName in ('YOUR_CLUSTER_NAME') and namespaceName in ('YOUR_NAMESPACE_NAME') facet daemonsetName, namespaceName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/DaemonsetPodsMissing.yaml) for more info.

    </Collapser>

    <Collapser
        id="deployment-missing-pods"
        title="Deployment is missing pods"
    >
      This alert condition generates an alert when the deployment is missing pods for more than 5 minutes. It runs this query:

        ```sql
        from K8sDeploymentSample
        select latest(podsMissing)
        WHERE clusterName in ('YOUR_CLUSTER_NAME') and namespaceName in ('YOUR_NAMESPACE_NAME') facet deploymentName, namespaceName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/DeploymentPodsMissing.yaml) for more info.

    </Collapser>

    <Collapser
        id="INSERT_ID_HERE"
        title="Etcd file descriptor utilization is high"
    >
      This alert condition generates an alert when the `Etcd` file descriptor usage is greater than 90% for more than 5 minutes. It runs this query:

        ```sql
        from K8sEtcdSample
        select max(processFdsUtilization)
        WHERE clusterName in ('YOUR_CLUSTER_NAME') facet displayName, clusterName
        ```
        
      See the [GitHub configuration file](https://github.com/newrelic/newrelic-quickstarts/blob/main/alert-policies/kubernetes/EtcdFileDescriptors.yaml) for more info.
    </Collapser>

    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
    <Collapser
        id="INSERT_ID_HERE"
        title="INSERT_TITLE_HERE"
    >
        INSERT_TEXT_HERE
    </Collapser>
</CollapserGroup>









These are the old ones:


<CollapserGroup>
  <Collapser
    className="freq-link"
    id="cpu-usage"
    title="Container CPU usage % is too high"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "180px" }}>
            Setting
          </th>

          <th>
            Value
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            <DNT>
              **Event type**
            </DNT>
          </td>

          <td>
            `K8sContainerSample`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **SELECT value**
            </DNT>
          </td>

          <td>
            `(cpuUsedCores/cpuLimitCores)*100`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Warning threshold**
            </DNT>
          </td>

          <td>
            \>90% for at least 5 minutes
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Critical threshold**
            </DNT>
          </td>

          <td>
            \>95% for at least 5 mins
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="memory-usage"
    title="Container memory usage % is too high"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "180px" }}>
            Setting
          </th>

          <th>
            Value
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            <DNT>
              **Event type**
            </DNT>
          </td>

          <td>
            `K8sContainerSample`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **SELECT value**
            </DNT>
          </td>

          <td>
            `memoryWorkingSetUtilization`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Warning threshold**
            </DNT>
          </td>

          <td>
            \>85% for at least 5 minutes
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Critical threshold**
            </DNT>
          </td>

          <td>
            \>95% for at least 5 mins
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="pod-not-scheduled"
    title="Pod was unable to be scheduled"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "180px" }}>
            Setting
          </th>

          <th>
            Value
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            <DNT>
              **Event type**
            </DNT>
          </td>

          <td>
            `K8sPodSample`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **SELECT value**
            </DNT>
          </td>

          <td>
            `isScheduled`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Warning threshold**
            </DNT>
          </td>

          <td/>
        </tr>

        <tr>
          <td>
            <DNT>
              **Critical threshold**
            </DNT>
          </td>

          <td>
            `isScheduled` = 0 for at least 7 minutes
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="pod-not-ready"
    title="Pod is not ready"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "180px" }}>
            Setting
          </th>

          <th>
            Value
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            <DNT>
              **Event type**
            </DNT>
          </td>

          <td>
            `K8sPodSample`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **SELECT value**
            </DNT>
          </td>

          <td>
            `isReady`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Warning threshold**
            </DNT>
          </td>

          <td/>
        </tr>

        <tr>
          <td>
            <DNT>
              **Critical threshold**
            </DNT>
          </td>

          <td>
            `isReady = 0` for at least 10 minutes
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="container-space"
    title="Container is running out of space"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "180px" }}>
            Setting
          </th>

          <th>
            Value
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            <DNT>
              **Event type**
            </DNT>
          </td>

          <td>
            `K8sContainerSample`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **SELECT value**
            </DNT>
          </td>

          <td>
            `fsUsedPercent`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Warning threshold**
            </DNT>
          </td>

          <td>
            \>75% for at least 5 minutes
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Critical threshold**
            </DNT>
          </td>

          <td>
            \>90% for at least 5 minutes
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="replicaset-pods"
    title="ReplicaSet doesn't have desired amount of pods"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "180px" }}>
            Setting
          </th>

          <th>
            Value
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            <DNT>
              **Event type**
            </DNT>
          </td>

          <td>
            `K8sReplicaSetSample`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **SELECT value**
            </DNT>
          </td>

          <td>
            `podsDesired - podsReady`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Warning threshold**
            </DNT>
          </td>

          <td/>
        </tr>

        <tr>
          <td>
            <DNT>
              **Critical threshold**
            </DNT>
          </td>

          <td>
            `0` for at least 5 minutes
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>

  <Collapser
    className="freq-link"
    id="etcd-descriptors"
    title="etcd open file descriptors"
  >
    <table>
      <thead>
        <tr>
          <th style={{ width: "180px" }}>
            Setting
          </th>

          <th>
            Value
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            <DNT>
              **Event type**
            </DNT>
          </td>

          <td>
            `K8sEtcdSample`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **SELECT value**
            </DNT>
          </td>

          <td>
            `(processOpenFds/processMaxFds)*100`
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Warning threshold**
            </DNT>
          </td>

          <td>
            \>75% for at least 3 minutes
          </td>
        </tr>

        <tr>
          <td>
            <DNT>
              **Critical threshold**
            </DNT>
          </td>

          <td>
            \>90% for at least 5 minutes
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>


## Google Kubernetes engine alert policy [#google-alert-policies]




