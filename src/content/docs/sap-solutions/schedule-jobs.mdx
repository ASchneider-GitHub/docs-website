---
title: "Schedule Jobs"
metaDescription: "Efficiently schedule critical jobs for New Relic SAP monitoring with our guide. Ensure optimal data flow with tailored frequencies for RFC checks, data collection, and error handling to maintain continuous system insights."
freshnessValidatedDate: never
---

There are three programs that need to be scheduled:

  <table>
    <thead>
      <tr>
      <th style={{ width: '200px' }}>
        ABAP Program
      </th>
      <th>
        Recommended Frequency
      </th>
      <th>
        Functionality
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
      `/NEWR/REGISTRY_RFC_CHECK`
      </td>
      <td>
        Every 3 minutes
      </td>
      <td>
        Check RFC connections to the Monitored Systems and NR API endpoints.
      </td>
    </tr>
    <tr>
      <td>
      `/NEWR/ABAP_COLLECTION_MANAGERN`
      </td>
      <td>
        Every 5 minutes
      </td>
      <td>
        Data Collection, multiple jobs should be scheduled based on connected systems and data providers.
      </td>
    </tr>
    <tr>
      <td>
      `/NEWR/RESEND_FAILED_API_TRANS`
      </td>
      <td>
        Every 15 minutes
      </td>
      <td>
        Re-submit failed transmission
      </td>
    </tr>
  </tbody>
</table>

## Schedule RFC check program [#schedule-rfc-check-program]

Schedule program `/NEWR/REGISTRY_RFC_CHECK` to run every 1 to 3 minutes. It should run more frequently than the data collection job. 

  <Callout variant="tip">
    We recommend using the job name `NR_RFC_CHECK`.
  </Callout>

## Schedule ABAP data collection manager [#schedule-abap-data-collection-manager]

### Collection manager variant guidelines

To ensure maximum performance and minimize resource impact on the **Monitoring System** and **Monitored System**, follow these guidelines for the collection manager program `/NEWR/ABAP_COLLECTION_MANAGERN`:

    1. Enterprise Connector: Select the New Relic account. Note that the default batch size for sending to New Relic cloud is 10,000 records per transaction.
    2. Data providers grouping: Based on the data volume, data providers should be separated into groups. We recommend creating at least three variants:
        - **One for the performance database-related data providers**: `NR.SAP.SYSTEM.PROCESS`, `NR_SAP_PROGRAM`, and `NR.SAP.TRANSACTION`.
        - **One for IDOC collection**: `NR_SAP_IDOC` and `NR_SAP_IDOC_configuration`.
        - **One for the rest of the data collectors**.
    3. **Execution Mode**: Select **Parallel Processing using CALL FUNC....**
        - Minimum Free Work Process Required: Default to 6.

      <img
      title="Data Provider Registry"
      alt="A screenshot displaying the SAP data provider registry"
      src="/images/new-relic-sap-abap-collection.webp"
      />

### Schedule single instance of collection manager job

To reduce the work process consumption on both the monitoring and the monitored systems, ensure only one instance of the collection manager job is running at any time by using SAP utility program `RSBTONEJOB2`.

    1. Create variants to specify the **JOB Name**, set **Program** to `/NEWR/ABAP_COLLECTION_MANAGERN`.
    For example, setting the data collection for trace data providers:
      - **JOB Name**: Collection Manager for Trace Data
      - **Program**: /NEWR/ABAP_COLLECTION_MANAGERN
      - **VARIANT**: TRACE_ONLY

      {/* Image to be added */}

    2. Schedule collection manager jobs with `RSBTONEJOB2` and the newly created variants. 
    3. Ensure the job names match the job name specified in the variant.

## Schedule resubmit program

Create a variant (suggested name `DEFAULT`) for the program `/NEWR/RESEND_FAILED_API_TRANS` for the New Relic account. This program should resubmit in case of a transmission error.

**Specify the following values:**

    - New Relic Account ID
    - HTTP Response Codes: Explicitly exclude single value `000` and `413`, as well as range `200` to `299`.

  <Callout variant="tip">
    Note that this job resubmits failed transmissions, e.g., HTTP response code 500, and also periodically purges transmission log entries. Schedule this job to run every 15 minutes.
  </Callout>

{/* Image needs to be added */}

