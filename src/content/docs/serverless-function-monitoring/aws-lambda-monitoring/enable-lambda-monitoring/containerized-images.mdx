---
title: Instrument your containerized image layer
metaDescription: A guide for instrumenting your containerized image layer with New Relic.
freshnessValidatedDate: never
---

<Steps>
<Step>
New Relic Integration in Dockerfile:
    1. To enhance performance monitoring in your application, integrate the New Relic layer compatible with your runtime and region into your Dockerfile.
    2. Choose the appropriate New Relic layer for your runtime environment:
            * [Python](https://gallery.ecr.aws/x6n7b2o2/newrelic-lambda-layers-python)
            * [Node.js](https://gallery.ecr.aws/x6n7b2o2/newrelic-lambda-layers-nodejs) 
            * [Java](https://gallery.ecr.aws/x6n7b2o2/newrelic-lambda-layers-java)
    3. Add the New Relic layer at the top of your Dockerfile to optimize monitoring and insights tailored to your specific environment.

    <Tabs>
    <TabsBar>
    <TabsBarItem id="1">Dockerfile for Go</TabsBarItem>
    <TabsBarItem id="2">Dockerfile for Java</TabsBarItem>
    <TabsBarItem id="3">Dockerfile for Python</TabsBarItem>
    <TabsBarItem id="4">Dockerfile for Node</TabsBarItem>
    <TabsBarItem id="5">Dockerfile for Ruby</TabsBarItem>
    </TabsBar>

    <TabsPages>

    <TabsPageItem id="1`">

    ```
    FROM public.ecr.aws/x6n7b2o2/newrelic-lambda-layers-python:38-arm64 AS layer

        # Layer code
        COPY --from=layer /opt/ /opt/
    ```
    </TabsPageItem>
    <TabsPageItem id="2`">

```
    FROM public.ecr.aws/x6n7b2o2/newrelic-lambda-layers-java:17-arm64 AS layer

        # Layer code
        COPY --from=layer /opt/ /opt/
```
    </TabsPageItem>

    <TabsPageItem id="3`">
    ```
    FROM public.ecr.aws/x6n7b2o2/newrelic-lambda-layers-python:38-arm64 AS layer

        # Layer code
        COPY --from=layer /opt/ /opt/
    ```
    </TabsPageItem>

    <TabsPageItem id="4`">

    ```
    FROM public.ecr.aws/x6n7b2o2/newrelic-lambda-layers-nodejs:20-arm64 AS layer

        # Layer code
        COPY --from=layer /opt/ /opt/
    ```
    </TabsPageItem>

    <TabsPageItem id="5`">

    </TabsPageItem>
    </TabsPages>
</Tabs>
</Step>

<Step>
### Create an image
    1. After you add the New Relic layer to your Dockerfile, you will need to build an image from the Dockerfile. We recommend following the steps listed in the AWS guide [Pushing a Docker image](https://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-push-ecr-image.html).
    2. Push the built image to your AWS Elastic Container Registry (ECR) repository for deployment.
</Step>

<Step>
### Configure your Lambda function
    1. Create a new Lambda function using the image you pushed to AWS ECR. For more information on how to create this function, we recommend reviewing the AWS guide: [Working with container images](https://docs.aws.amazon.com/lambda/latest/dg/images-create.html).
    2. Configure the Lambda function based on your existing Lambda function configuration.
    3. Ensure add any necessary environment variables required for New Relic integration.
    4. Update your function's handler to point to the newly attached layer in CMD Override for your function, find the below links for reference.
</Step>>
</Steps>