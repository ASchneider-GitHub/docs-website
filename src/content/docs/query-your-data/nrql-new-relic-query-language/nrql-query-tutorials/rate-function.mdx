---
title: 'Rate function: visualize occurrences over a specific time period'
tags:
  - Query your data
  - 'NRQL: New Relic Query Language'
  - NRQL query tutorials
metaDescription: 'For New Relic Query Language (NRQL): how to use the rate() function to visualize event occurrences over a set period of time.'
redirects:
freshnessValidatedDate: never
---

import exampleRateFunction from 'images/example_rate_function.webp'

import exampleRateFunctionNoTimeseries from 'images/example_rate_function_no_timeseries.webp'

import exampleLatestRateFunction from 'images/example_latestrate_function.webp'

With the rate function, you can visualize the frequency of event occurrences over specific time windows. For example, you can use the `rate()` function to view how many errors occurred per hour in the past day.

## `rate()`

The rate() function aggregates occurrences of an event into buckets based on time windows. Include the `TIMESERIES` keyword to generate a line chart with rates over time, or omit `TIMESERIES` to generate a billboard showing a single rate value averaged over time.

You can specify which function to use as well as the size of the time window you want to inspect. You can find more information [here.](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions/#func-rate)

Here's a query that will visualize transaction errors per minute over the last 30 minutes:

```sql
SELECT rate(count(*), 1 minute) AS 'Errors' FROM TransactionError TIMESERIES SINCE 30 minutes ago
```

<img
  title="Rate function with timeseries"
  alt="A screenshot displaying an example of the rate() function"
  src={exampleRateFunction}
/>

Running the same query without including `TIMESERIES` will display a single value representing the average occurrences over a period of time.

<img
  title="Rate function without timeseries"
  alt="A screenshot displaying an example of the rate() function without TIMESERIES"
  src={exampleRateFunctionNoTimeseries}
/>

## `latestRate()`

The `latestRate()` function uses a specified attribute and time interval to return the rate of change of a value over the two most recent data points. The function's units will be in `change in attribute` / `time window`. You can use this function to see leading-edge trends.

Here's a query that will return the change in duration per second for the past two transaction errors:

```sql
SELECT latestrate(duration, 1 second) FROM TransactionError SINCE 30 minutes ago
```

<img
  title="Latestrate function"
  alt="A screenshot displaying an example of the latestRate() function"
  src={exampleLatestRateFunction}
/>

<Callout variant="important">
  Remember that the `latestRate()` function uses the two most recent datapoints, and your results may be volatile. Consider using `rate()` if you'd like to average over larger buckets of event occurrences.
</Callout>

## Examples

<CollapserGroup>
  <Collapser
    id="error-by-hostname"
    title="Visualize error rate by host"
  >
    To chart lines based on their host, you can `FACET` by `host`. This example demonstrates how you can use the `rate()` function to identify a bad host.

    ```sql
    SELECT rate(count(*), 1 minute) FROM TransactionError TIMESERIES SINCE 30 minutes ago FACET host
    ```

    Running the query returns a chart with separate lines for each host.
  </Collapser>

  <Collapser
      id="average-appname-errors"
      title="Average errors over the past hour by appName"
    >
      If you want to view errors by application, you can `FACET` by `appName`. This example demonstrates how you can identify the average errors by application over the past hour.

      ```sql
      SELECT rate(count(*), 1 minute) FROM TransactionError SINCE 30 minutes ago FACET appName
      ```

      Running the query returns a table of results by application name.
    </Collapser>
</CollapserGroup>

