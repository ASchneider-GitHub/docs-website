---
title: Setting a query's time range
tags:
  - Query your data
  - 'NRQL: New Relic Query Language'
  - Get started
translate:
  - jp
  - kr
metaDescription: "A detailed description of how to set the timerange of a NRQL query."
freshnessValidatedDate: never
---

import exampleFacetedLeftJoin from 'images/nrql_screenshot-crop_example-faceted-left-join.webp'

import exampleFacetedInnerJoin from 'images/nrql_screenshot-crop_example-faceted-inner-join.webp'

import exampleColumnarInnerJoin from 'images/nrql_screenshot-crop_example-columnar-inner-join.webp'

import exampleJoinedPercentile from 'images/nrql_screenshot-crop_example-joined-percentile.webp'

import exampleJoinedMedian from 'images/nrql_screenshot-crop_example-joined-median.webp'

import queriesnrqlApdexNRQLQueryBuilder from 'images/queries-nrql_screenshot-full_apdex-NRQL-query-builder.webp'

import lowerExample from 'images/lowerExample.webp'

import percentile0 from 'images/percentile_0.webp'

import positionExample from 'images/positionExample.webp'

import queriesnrqlPercentileNRQLQueryBuilder from 'images/queries-nrql_screenshot-full_percentile-NRQL-query-builder.webp'

import queriesnrqlFilterNRQLQueryBuilder from 'images/queries-nrql_screenshot-full_filter-NRQL-query-builder.webp'

import screenshotInsightsFilter00 from 'images/screenshot_insights_filter_0_0.webp'

import substringExample from 'images/substringExample.webp'

import upperExample from 'images/upperExample.webp'

[NRQL](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language) was
created to query telemetry data.

Every query that is executed only considers telemetry data that falls in a specified time range. If a query request
does not specify a time range, the last hour of telemetry data will be queried.

## Specifying a time range [#spec-time-range]
There are two ways to specify the time range:

### Using the dashboard [time picker](/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard/#dash-time-picker)

When viewing a dashboard, the time picker time range will supersede a query's `SINCE` and `UNTIL` clauses, unless the widgets has been configured to disable
the time picker.

### Include [`SINCE`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions#sel-since) and/or [`UNTIL`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions#sel-until)

  Simple example: `FROM Foo SELECT * SINCE 2 days ago UNTIL 1 day ago`

  See the [Specifying a time](#spec-time) section below for a list of supported time formats.

### Time range snapping
Depending on the type of query, the specified `SINCE` and `UNTIL` times may be adjusted at execution time.

<Collapser id="timeseries-snap-example" title="Metric query snapping">
  Metric events and some sample event types may need to adjust the specified time range to the metric's roll-up time aggregations.

  Example query: `FROM Metric SELECT ... SINCE '2023-12-20T00:04Z' UNTIL '2023-12-22T00:03Z'`

  Looking at the JSON response to this query, this 47 hour and 59 minute time range resolves to 5 minute Metric time
  aggregations, so the actual time range snaps to nearby aggregation edges,
  `"beginTime": "2023-12-20T00:00:00Z", "endTime": "2023-12-22T00:00:00Z"`.
</Collapser>


<Collapser id="timeseries-snap-example" title={<><InlineCode>TIMESERIES</InlineCode> query snapping</>}>
  Queries with `TIMESERIES` may need to adjust the time range so the results do not include a partial timeseries bucket.

  Example query: `FROM Foo SELECT count(*) TIMESERIES 5 minutes SINCE '2023-12-20T00:04:59Z' UNTIL '2023-12-21T00:03:12Z'`

  Looking at the JSON response to this query, the timeseries buckets are based on the end of the time range, and the
  start time is adjusted so the first bucket in the response is a covers a full 5 minutes.
  `"beginTime": "2023-12-20T00:08:12Z", "endTime": "2023-12-21T00:03:12Z"`.
</Collapser>

## Specifying a time [#spec-time]
There are multiple ways to specify time in the `SINCE` and until `UNTIL` clauses.

<Callout variant="tip" title="Timezones">
  For each of the options listed below, the *default* timezone is UTC. Note that the user's preferred timezone
  is not used for query execution. (The user timezone preference is only used to *display* DateTime values.)

  If you want to specify a timezone other than UTC for the time range, you can include it in the DateTime
  string option, or you can NRQL's
  [`WITH TIMEZONE`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions#sel-timezone)
  clause.
</Callout>

<Collapser
  className="freq-link"
  id="time-n-units-ago"
  title={<>Unix time (Epoch Milliseconds)</>}
>
  The time can be referenced as Unix time in milliseconds. This is the number of milliseconds since
  <span style="font-family:monospace">1970-01-01T00:00:00Z</span>, or midnight on the 1st of January, 1970.

  Example query: `FROM Foo SELECT * SINCE 1702899296789 UNTIL 1702902896789`

  These timestamp values resolve to a time range starting at
  <span style="font-family:monospace">2023-12-18T11:34:56.789Z</span>, and ending
  at  <span style="font-family:monospace">2023-12-18T12:34:56.789Z</span>.
</Collapser>

<Collapser
  className="freq-link"
  id="relative-time-n-units-ago"
  title={<>Relative time: <i>n [time units] ago</i></>}
>
  Relative time can be referenced as <InlineCode>*n* [time units] ago</InlineCode>.
  The time is relative to the time the query is executed.

  * <InlineCode>*n*</InlineCode> A positive integer value
  * `[time units]` Available time units include:
    * `seconds`
    * `minutes`
    * `hours`
    * `days`
    * `weeks`
    * `months` - A relative month is defined as 30 days
    * `quarters` - A relative quarter is defined as 91 days
    * `years` - A relative year is defined as 365 days

    Time unit pluralization is optional, so you can leave the "s" off the end of the unit. `2 day ago` and `2 days ago` have the same meaning.

  ### Examples:
  In these examples, assume the query was executed at <span style="font-family:monospace">2023-12-18T12:34:56.789Z</span>.
  <table style={{ width: "auto" }}>
    <thead>
    <tr>
      <th>
        Relative time reference
      </th>
      <th>
        Resolved time (UTC)
      </th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>`NOW` (query execution time)</td>
      <td style="font-family:monospace">2023-12-18T12:34:56.789Z</td>
    </tr>
    <tr>
      <td>`2 seconds ago`</td>
      <td style="font-family:monospace">2023-12-18T12:34:**54**.789Z</td>
    </tr>
    <tr>
      <td>`2 minutes ago`</td>
      <td style="font-family:monospace">2023-12-18T12:**32**:56.789Z</td>
    </tr>
    <tr>
      <td>`2 hours ago`</td>
      <td style="font-family:monospace">2023-12-18T**10**:34:56.789Z</td>
    </tr>
    <tr>
      <td>`2 days ago`</td>
      <td style="font-family:monospace">2023-12-**16**T12:34:56.789Z</td>
    </tr>
    <tr>
      <td>`2 weeks ago`</td>
      <td style="font-family:monospace">2023-12-**04**T12:34:56.789Z</td>
    </tr>
    <tr>
      <td>`2 months ago`</td>
      <td style="font-family:monospace">2023-**10-19**T12:34:56.789Z</td>
    </tr>
    <tr>
      <td>`2 quarters ago`</td>
      <td style="font-family:monospace">2023-**06-19**T12:34:56.789Z</td>
    </tr>
    <tr>
      <td>`2 years ago`</td>
      <td style="font-family:monospace">**2021**-12-18T12:34:56.789Z</td>
    </tr>
    </tbody>
  </table>
</Collapser>

<Collapser
  className="freq-link"
  id="relative-temporal-time"
  title="Relative temporal time"
>
  Relative time can also be specified using temporal time references.
  These relative time references reference the beginning of the temporal time interval.
  Relative temporal time reference will honor a `WITH TIMEZONE` clause.

  ## Day references
  You can reference specific days, including `today`, `yesterday` or a weekday.
  The most recent occurrence of a reference weekday will be used.
  * today - resolves to midnight this morning
  * yesterday - resolves to midnight yesterday morning
  * monday - resolves to midnight on the most recent Monday morning
  * tuesday - resolves to midnight on the most recent Tuesday morning
  * wednesday - resolves to midnight on the most recent Wednesday morning
  * thursday - resolves to midnight on the most recent Thursday morning
  * friday - resolves to midnight on the most recent Friday morning
  * saturday - resolves to midnight on the most recent Saturday morning
  * sunday - resolves to midnight on the most recent Sunday morning

  ### `AT` time of day
  When referencing a relative day, the time of day can be specified, overriding the default midnight time.

  Example: `yesterday AT '01:23:45'`

  The time reference must include the hour and minute, and optionally the second. The AT clause time does not
  support inclusion of milliseconds or time zone references within the time string.

  Note that `today AT [time]` in a `SINCE` clause will never reference a time in the future.  If the referenced time
  is in the future, the meaning of `today` will be adjusted to the previous day. So, if the current time is 12:00, and
  the `SINCE` clause is `SINCE today AT 12:01`, the resolved query begin time will be *yesterday* at 12:01.

  ## Beginning of time unit references
  The current ("this") or most recently completed ("last") time unit can also referenced.
  * `this hour` - The beginning of the current hour (0 minutes 0 seconds)
  * `this week` - The beginning of the current week. This refers to a business week, so `this week` resolves to
  the most recent Monday morning at midnight.
  * `this month` - The beginning of the current month. This refers to midnight on the first day of the current month.
  * `this quarter` - The beginning of the current quarter. This refers to midnight on the first day of the current
  quarter. Quarters begin on the first of the months January, April, July, and October.
  * `this year` - The beginning of the current year. This refers to midnight on the first day (January 1) of the current
  year.
  * `last hour` - The beginning of the previous hour.
  * `last week` - The beginning of the previous week.
  * `last month` - The beginning of the previous month.
  * `last quarter` - The beginning of the previous quarter.
  * `last year` - The beginning of the previous year.

  ### Examples:
  In these examples, assume the query was executed at
  <span style="font-family:monospace">2023-12-18T12:34:56.789Z</span>, which was a Monday.
  <table style={{ width: "auto" }}>
    <thead>
    <tr>
      <th>
        Relative temporal time reference
      </th>
      <th>
        Resolved time (relative to 2023-12-18T12:34:56.789Z)
      </th>
    </tr>
    </thead>
    <tbody>
    <tr><td>`NOW` (query execution time)</td><td style="font-family:monospace">2023-12-18T12:34:56.789Z</td></tr>
    <tr>
      <td>`today`</td>
      <td style="font-family:monospace">2023-12-18T**00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`today at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-18T**01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`today at '23:45'` (after execution time)</td>
      <td style="font-family:monospace">2023-12-**17T23:45:00.000**Z</td>
    </tr>
    <tr>
      <td>`yesterday`</td>
      <td style="font-family:monospace">2023-12-**17T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`yesterday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**17T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`monday`</td>
      <td style="font-family:monospace">2023-12-**18T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`monday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**18T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`tuesday`</td>
      <td style="font-family:monospace">2023-12-**12T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`tuesday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**12T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`wednesday`</td>
      <td style="font-family:monospace">2023-12-**13T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`wednesday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**13T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`thursday`</td>
      <td style="font-family:monospace">2023-12-**14T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`thursday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**14T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`friday`</td>
      <td style="font-family:monospace">2023-12-**15T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`friday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**15T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`saturday`</td>
      <td style="font-family:monospace">2023-12-**16T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`saturday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**16T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`sunday`</td>
      <td style="font-family:monospace">2023-12-**17T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`sunday at '01:23:45'`</td>
      <td style="font-family:monospace">2023-12-**17T01:23:45.000**Z</td>
    </tr>
    <tr>
      <td>`this hour`</td>
      <td style="font-family:monospace">2023-12-18T**12:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`last hour`</td>
      <td style="font-family:monospace">2023-12-18T**11:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`this week`</td>
      <td style="font-family:monospace">2023-12-**18T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`last week`</td>
      <td style="font-family:monospace">2023-12-**11T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`this month`</td>
      <td style="font-family:monospace">2023-12-**01T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`last month`</td>
      <td style="font-family:monospace">2023-**11-01T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`this quarter`</td>
      <td style="font-family:monospace">2023-**10-01T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`last quarter`</td>
      <td style="font-family:monospace">2023-**07-01T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`this year`</td>
      <td style="font-family:monospace">2023-**01-01T00:00:00.000**Z</td>
    </tr>
    <tr>
      <td>`last year`</td>
      <td style="font-family:monospace">**2022-01-01T00:00:00.000**Z</td>
    </tr>
    </tbody>
  </table>

</Collapser>


<Collapser
  className="freq-link"
  id="time-datetime"
  title={<>Use a DateTime String</>}
>
  A time range time can be specified using a DateTime string string.

  ### Examples:
  In these examples, assume the query was executed at 2023-12-18T14:27:32.189Z.
  <table style={{ width: "auto" }}>
    <thead>
    <tr>
      <th>
        Relative temporal time reference
      </th>
      <th>
        Resolved time (relative to 2023-12-18T14:27:32.189Z)
      </th>
    </tr>
    </thead>
    <tbody>
    <tr><td>`'2023-12-17T18:34 [America/Chicago]'`</td><td style="font-family:monospace">2023-12-18T00:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18T06:34:00 [America/Chicago]'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'2023-12-17T18:34-0600'`</td><td style="font-family:monospace">2023-12-18T00:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18T06:34:00-0600'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'2023-12-17T18:34-06:00'`</td><td style="font-family:monospace">2023-12-18T00:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18T06:34:00-06:00'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'2023-12-17T6:34-0600 pm'`</td><td style="font-family:monospace">2023-12-18T00:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18T6:34:00-06:00 AM'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18T00:34'`</td><td style="font-family:monospace">2023-12-18T00:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18T12:34:00'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'2023-12-17 18:34-0600'`</td><td style="font-family:monospace">2023-12-18T00:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18 6:34:00-0600'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'2023-12-17 6:34-0600 pm'`</td><td style="font-family:monospace">2023-12-18T00:34:00.000Z</td></tr>
    <tr><td>`'2023-12-18 6:34:00-06:00 AM'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'12:33'`</td><td style="font-family:monospace">2023-12-18T12:33:00.000Z</td></tr>
    <tr><td>`'12:34:00'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'6:33-0600 am'`</td><td style="font-family:monospace">2023-12-18T12:33:00.000Z</td></tr>
    <tr><td>`'6:34:00-06:00 AM'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'6:33-0600'`</td><td style="font-family:monospace">2023-12-18T12:33:00.000Z</td></tr>
    <tr><td>`'06:34:00-0600'`</td><td style="font-family:monospace">2023-12-18T12:34:00.000Z</td></tr>
    <tr><td>`'2023-07-03'`</td><td style="font-family:monospace">2023-07-03T08:00:00.000Z</td></tr>
    <tr><td>`'2023-07-03-0600'`</td><td style="font-family:monospace">2023-07-03T06:00:00.000Z</td></tr>
    </tbody>
  </table>

</Collapser>






## Related docs [#related-docs]

Other popular resources for understanding NRQL syntax include:

* [NRQL instructional course](https://learn.newrelic.com/writing-nrql-queries) from New Relic University
* [NRQL reference](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions)
