---
title: Setting a query's time range
tags:
  - Query your data
  - 'NRQL: New Relic Query Language'
  - Get started
translate:
  - jp
  - kr
metaDescription: "A detailed description of how to set the timerange of a NRQL query."
freshnessValidatedDate: never
---

import exampleFacetedLeftJoin from 'images/nrql_screenshot-crop_example-faceted-left-join.webp'

import exampleFacetedInnerJoin from 'images/nrql_screenshot-crop_example-faceted-inner-join.webp'

import exampleColumnarInnerJoin from 'images/nrql_screenshot-crop_example-columnar-inner-join.webp'

import exampleJoinedPercentile from 'images/nrql_screenshot-crop_example-joined-percentile.webp'

import exampleJoinedMedian from 'images/nrql_screenshot-crop_example-joined-median.webp'

import queriesnrqlApdexNRQLQueryBuilder from 'images/queries-nrql_screenshot-full_apdex-NRQL-query-builder.webp'

import lowerExample from 'images/lowerExample.webp'

import percentile0 from 'images/percentile_0.webp'

import positionExample from 'images/positionExample.webp'

import queriesnrqlPercentileNRQLQueryBuilder from 'images/queries-nrql_screenshot-full_percentile-NRQL-query-builder.webp'

import queriesnrqlFilterNRQLQueryBuilder from 'images/queries-nrql_screenshot-full_filter-NRQL-query-builder.webp'

import screenshotInsightsFilter00 from 'images/screenshot_insights_filter_0_0.webp'

import substringExample from 'images/substringExample.webp'

import upperExample from 'images/upperExample.webp'

[NRQL](/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language) was
created to query telemetry data.

Every query that is executed only considers telemetry data that falls in a specified time range. If a query request
does not specify a time range, the last hour of telemetry data will be queried.

## Specifying a time range [#spec-time-range]
There are two ways to specify the time range:

### Using the dashboard [time picker](/docs/query-your-data/explore-query-data/dashboards/manage-your-dashboard/#dash-time-picker)

When viewing a dashboard, the time picker time range will supersede a query's `SINCE` and `UNTIL` clauses, unless the widgets has been configured to disable
the time picker.

### Include [`SINCE`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions#sel-since) and/or [`UNTIL`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions#sel-until)

  Simple example: `FROM Foo SELECT * SINCE 2 days ago UNTIL 1 day ago`

  See the [Specifying a time](#spec-time) section below for a list of supported time formats.

### Time range snapping
Depending on the type of query, the specified `SINCE` and `UNTIL` times may be adjusted at execution time.

<Collapser id="timeseries-snap-example" title="Metric query snapping">
  Metric events and some sample event types may need to adjust the specified time range to the metric's roll-up time aggregations.

  Example query: `FROM Metric SELECT ... SINCE '2023-12-20T00:04Z' UNTIL '2023-12-22T00:03Z'`

  Looking at the JSON response to this query, this 47 hour and 59 minute time range resolves to 5 minute Metric time
  aggregations, so the actual time range snaps to nearby aggregation edges,
  `"beginTime": "2023-12-20T00:00:00Z", "endTime": "2023-12-22T00:00:00Z"`.
</Collapser>


<Collapser id="timeseries-snap-example" title={<><InlineCode>TIMESERIES</InlineCode> query snapping</>}>
  Queries with `TIMESERIES` may need to adjust the time range so the results do not include a partial timeseries bucket.

  Example query: `FROM Foo SELECT count(*) TIMESERIES 5 minutes SINCE '2023-12-20T00:04:59Z' UNTIL '2023-12-21T00:03:12Z'`

  Looking at the JSON response to this query, the timeseries buckets are based on the end of the time range, and the
  start time is adjusted so the first bucket in the response is a covers a full 5 minutes.
  `"beginTime": "2023-12-20T00:08:12Z", "endTime": "2023-12-21T00:03:12Z"`.
</Collapser>

## Specifying a time [#spec-time]
There are multiple ways to specify time in the `SINCE` and until `UNTIL` clauses.

<Callout variant="tip" title="Timezones">
  For each of the options listed below, the *default* timezone is UTC. Note that the user's preferred timezone
  is not used for query execution. (The user timezone preference is only used to *display* DateTime values.)

  If you want to specify a timezone other than UTC for the time range, you can include it in the DateTime
  string option, or you can NRQL's
  [`WITH TIMEZONE`](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions#sel-timezone)
  clause.
</Callout>

<Collapser
  className="freq-link"
  id="time-n-units-ago"
  title={<>Unix time (Epoch Milliseconds)</>}
>
  The time can be referenced as Unix time in milliseconds. This is the number of milliseconds since
  1970-01-01T00:00:00Z, or midnight on the 1st of January, 1970.

  Example query: `FROM Foo SELECT * SINCE 1703267918522 UNTIL 1703271519431`

  These timestamp values translate to a time range starting at 2023-12-22T17:58:38.522Z and ending
  at 2023-12-22T18:58:39.431Z.

</Collapser>

<Collapser
  className="freq-link"
  id="time-n-units-ago"
  title={<>Relative time: <InlineCode><i>n</i> [time units] ago</InlineCode></>}
>
  Relative time can be referenced as `*n* [time units] ago`. The time is relative to the time the query is executed.

  * `*n*` must be an integer value
  * `time units` Available time units include:
    * seconds
    * minutes
    * hours
    * days
    * weeks
    * months - A relative month is defined as 30 days
    * quarters - A relative quarter is defined as 91 days
    * years - A relative year is defined as 365 days

    Time unit pluralization is optional, so you can leave the "s" off the end of the unit. `2 day ago` and `2 days ago` have the same meaning.

  ## Examples:
  In these examples, assume the query was executed at 2023-12-18T14:27:32.189Z.
  <table style={{ width: "auto" }}>
    <thead>
    <tr>
      <th>
        Relative time reference
      </th>
      <th>
        Resolved time (relative to 2023-12-18T14:27:32.189Z)
      </th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>2 SECONDS AGO</td>
      <td>2023-12-18T14:27:30.189Z</td>
    </tr>
    <tr>
      <td>2 MINUTES AGO</td>
      <td>2023-12-18T14:25:32.189Z</td>
    </tr>
    <tr>
      <td>2 HOURS AGO</td>
      <td>2023-12-18T12:27:32.189Z</td>
    </tr>
    <tr>
      <td>2 DAYS AGO</td>
      <td>2023-12-16T14:27:32.189Z</td>
    </tr>
    <tr>
      <td>2 WEEKS AGO</td>
      <td>2023-12-04T14:27:32.189Z</td>
    </tr>
    <tr>
      <td>2 MONTHS AGO</td>
      <td>2023-10-19T14:27:32.189Z</td>
    </tr>
    <tr>
      <td>2 QUARTERS AGO</td>
      <td>2023-06-19T14:27:32.189Z</td>
    </tr>
    <tr>
      <td>2 YEARS AGO</td>
      <td>2021-12-18T14:27:32.189Z</td>
    </tr>
    </tbody>
  </table>
</Collapser>

<Collapser
  className="freq-link"
  id="time-n-units-ago"
  title="Relative temporal time"
>
  WIP

  ## Examples:
  In these examples, assume the query was executed at 2023-12-18T14:27:32.189Z, meaning
  the resulting times are relative to this execution time.

</Collapser>

<Collapser
  className="freq-link"
  id="time-datetime"
  title={<>Use a DateTime String</>}
>
  A time range time can be specified using a DateTime string string.
</Collapser>

<Collapser
  className="freq-link"
  id="time-datetime"
  title={<>Use a DateTime String</>}
>
A time range time can be specified using a DateTime string string.
</Collapser>





## Related docs [#related-docs]

Other popular resources for understanding NRQL syntax include:

* [NRQL instructional course](https://learn.newrelic.com/writing-nrql-queries) from New Relic University
* [NRQL reference](/docs/query-your-data/nrql-new-relic-query-language/get-started/nrql-syntax-clauses-functions)
